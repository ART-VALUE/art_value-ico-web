{"version":3,"sources":["routes/RoutingPaths.ts","contexts.ts","ui/style/base.ts","ui/style/button.ts","ui/style/grouping.ts","ui/style/text.ts","ui/style/error.ts","ui/components/auth/CurrentUserInfo.tsx","service/api/index.ts","util.ts","ui/components/ErrorContactInfo.tsx","ui/components/GenericError.tsx","ui/components/LoadingRing.tsx","service/api/auth.ts","ui/components/auth/LogOut.tsx","service/model/Deposit.ts","service/api/deposit.ts","service/eth/util.ts","service/eth/networks.ts","service/number/exceptions.ts","service/number/index.ts","config.ts","ui/components/DepositDetails.tsx","ui/style/table.ts","ui/components/Carousel.tsx","ui/components/purchase/SuccessSlide.tsx","ui/components/purchase/VerifyDepositSlide.tsx","ui/components/purchase/ConfirmEthTxSlide.tsx","service/eth/providers.ts","ui/components/Loading.tsx","ui/style/form.ts","ui/components/wallet/SelectExistingWalletForm.tsx","ui/components/wallet/SelectNewWalletAddressForm.tsx","ui/components/wallet/SelectWalletSlide.tsx","ui/components/purchase/GetEthTxReceipt.tsx","ui/components/purchase/ConfirmAndVerifyDepositSlides.tsx","ui/style/modal.ts","ui/components/AvModal.tsx","ui/components/purchase/ErrorFallback.tsx","ui/components/DepositsTable.tsx","ui/components/Profile.tsx","ui/components/purchase/ParamsSlide.tsx","ui/components/auth/LogInUsingSessionSlide.tsx","ui/components/auth/LogInUsingWalletSlide.tsx","ui/components/auth/SignupForm.tsx","ui/components/auth/SignUpSlide.tsx","ui/components/auth/LoginSlides.tsx","service/eth/pay.ts","ui/components/purchase/PayUsingWalletSlide.tsx","ui/components/purchase/EtherSlides.tsx","ui/components/purchase/CreateDepositSlide.tsx","ui/components/purchase/InfoSlide.tsx","ui/components/purchase/UpdateDepositSlide.tsx","ui/components/purchase/PurchaseSlides.tsx","ui/components/TextCountdown.tsx","ui/components/Home.tsx","routes/Routes.tsx","ui/components/navigation/StyledNavigation.styles.ts","ui/components/navigation/desktop/StyledDesktop.styles.ts","ui/components/navigation/desktop/NavigationDesktop.tsx","ui/components/navigation/mobile/Burger/StyledBurger.styles.ts","ui/components/navigation/mobile/Burger/Burger.tsx","ui/components/navigation/mobile/Menu/StyledMenu.styles.ts","ui/components/navigation/mobile/Menu/Menu.tsx","ui/components/navigation/mobile/NavigationMobile.tsx","ui/components/hooks/hooks.tsx","assets/images/logo-transparent.png","ui/components/navigation/Navigation.tsx","service/api/io.ts","service/api/session.ts","ui/components/App.tsx","ui/components/AlertTemplate.tsx","index.tsx"],"names":["IosContext","createContext","useIos","ios","useContext","Error","RestContext","WalletsContext","useWallets","wallets","CurrentUserContext","useCurrentUserDetails","currentUserContext","BaseText","css","p","theme","color","text","font","BaseTitle","Button","styled","button","border","surface","ButtonBig","ImageButton","Section","section","MainWrapper","div","Main","main","P","A","a","link","linkVisited","linkHover","linkActive","H1","h1","H2","h2","H3","h3","SpanItalic","h4","span","MonoData","Pre","pre","StrongNumber","strong","ErrorP","CurrentUserInfo","currentUser","email","ethAddress","ApiException","message","name","ApiCallTimeoutException","UnknownApiException","NamedApiException","originalName","originalMessage","parseApiResult","apiResponse","error","data","isNamedApiException","asyncApiCall","socket","ev","timeout","Promise","resolve","reject","setTimeout","emit","msg","tryRetrow","tryBlock","retrowBlock","markErrorProcessed","isErrorProcessed","errorToString","stringRepresentation","JSON","stringify","ErrorContactInfo","href","GenericError","children","RingContainer","RingPart","LoadingRing","getMe","authIo","SigningDeniedException","authenticateThroughWeb3","web3","address","signedVerifier","signedVerifierHash","eth","accounts","hashMessage","sign","e","userSignature","user","wallet","providerType","base","fetch","method","credentials","res","json","apiResult","LogOut","restApiBase","rest","useRest","nullCurrentUser","logOutMutation","useMutation","authApi","useEffect","isSuccess","isLoading","isError","onClick","mutate","onSubmit","preventDefault","type","Deposit","uuid","amount","timeCreated","priceEther","gasPrice","ethTxHash","isVerified","this","dto","BN","depositIo","fromDto","deposit","getMyPaidDeposits","map","weiToEtherStr","wei","toNumber","toString","weiToGweiStr","web3networks","1","portisName","explorerTx","explorerAddress","3","4","5","42","txHashToExplorerUrl","chainId","txHash","NumberFormatException","TooManyDecimalSeparatorsException","InvalidCharacterException","FrationalPartTooLargeException","decimalSeparatorRegex","nonNumericRegex","browserDecimalSeparator","toLocaleString","substring","toFractionFactor","nbroFractionDigits","pow","fractionlessToString","number","maxNbroFractionDigits","fractionFactor","integerPart","fractionalPart","sub","mul","integerPartStr","fractionalPartStr","isZero","throwOnNonNumeric","string","stringName","nonNumeric","match","index","etherToAddress","frontend","minimumConfirmations","stages","presale","minAmount","depositPercentage","DepositDetails","onLaunchVerification","useTheme","Date","config","target","rel","icon","faCheck","success","faTimes","Table","table","thTdCommon","Th","th","Tr","tr","TrHead","Td","td","TdAlignRight","TdItalic","SlidesContCont","SlidesCont","Step","numberOfSteps","className","style","width","transition","duration","items","Carousel","currentIndex","Children","count","marginLeft","child","SuccessSlide","onClose","VerifyDepositSlide","onVerified","useState","callbackCalled","setCallbackCalled","qDepositVerification","useQuery","verifyDeposit","refetch","NotConfirmedYetException","confirmations","ConfirmEthTxSlide","txReceipt","onTransactionConfirmed","setConfirmations","qBlockNumber","getBlockNumber","blockNumber","newConfirmations","retry","_","retryDelay","transactionHash","BrowserWalletNotFoundException","createPortisProvider","createBrowserProvider","Portis","scope","provider","detectEthereumProvider","silent","request","LoadingRingContainer","Loading","Label","label","Input","input","SelectExistingWalletForm","onWalletSelected","walletsSet","setWallets","Array","from","firstWallet","chosenWallet","setChosenWallet","length","currentWallets","Set","key","value","defaultChecked","onChange","UseAddressButton","SelectNewWalletAddressForm","addresses","onAddressSelected","firstAddress","selectedAddress","setSelectedAddress","SelectWallet","values","newWalletProviderType","setNewWalletProviderType","qNewWalletProvider","createProvider","enabled","Web3","qAccounts","getAccounts","handleBrowserWalletClick","src","alt","String","GetEthTxReceipt","onGotEthTxReceipt","qEthTx","getTransactionReceipt","ConfirmAndVerifyDepositSlides","selectedWallet","setSelectedWallet","ethTxReceipt","setEthTxReceipt","carouselIndex","setCarouselIndex","hasConfirmedEthTx","setHasConfirmedEthTx","verifiedDeposit","setVerifiedDeposit","old","Math","max","receipt","ModalContainer","background","ModalCloseButton","AvModal","isOpen","contentLabel","modalRef","useRef","refAsElement","current","content","position","inset","maxWidth","maxHeight","padding","overflowY","borderRadius","overlay","display","alignItems","justifyContent","zIndex","height","onRequestClose","ref","onAfterOpen","disableBodyScroll","onAfterClose","enableBodyScroll","size","ErrorFallback","resetErrorBoundary","DepositDetailsButton","DepositsTable","currentDepositDetails","setCurrentDepositDetails","showVerifyDepositModal","setShowVerifyDepositModal","qDeposits","closeDepositDetailsModal","faInfoCircle","slice","FallbackComponent","LogoutSection","Profile","loginByModal","CENT","ParamsSlide","onEtherCheckout","form","amountError","setAmountError","setAmount","amountText","setAmountText","minimumAmountStr","amountChargedNow","amountChargedDuringPrivate","placeholder","parseResult","newAmountString","numberString","decimalSeparator","throwOnTooLargeFractionPart","numberParts","split","fractionPartStr","integerPartWoDecimalSeparators","replace","fractionlessIntegerPart","withDecimalSeparator","fractionPartDigits","slicedAndPaddedFractionPart","padEnd","fractionPart","processedFractionPartStr","min","lastZeroIndex","lastIndexOf","trimmedProcessedFractionPartStr","add","fractionlessNumberFromString","newAmount","lt","checkValidity","backgroundColor","LogInUsingSessionSlide","onLoggedIn","onNotLoggedIn","setCurrentUser","auth","qMe","userFromApi","LogInUsingWalletSlide","onNoSuchUser","qAuthenticateMutation","SignupForm","onFormComplete","setEmail","SignUpSlide","onSignedUp","signUpMutation","mutateAsync","LoginSlides","to","sendTransaction","PayUsingWalletSlide","toAddress","onPaymentComplete","qPaymentMutation","payUsingWeb3","EtherSlides","CreateDepositSlide","onDepositCreated","qDepositMutation","createDeposit","InfoSlide","onContinue","SetDepositEthTxHashSlide","onDepositEthTxHashSet","setDepositEthTxHash","PurchaseSlides","stripePromise","setDeposit","depositEthTxHashIsSet","setDepositEthTxHashIsSet","ethTxReceiptAndWallet","setEthTxReceiptAndWallet","ethTxConfirmed","setEthTxConfirmed","ethTxVerified","setEthTxVerified","setCheckoutId","random","_amount","console","log","toDeltaFromNow","date","now","deltaToSeconds","t","deltaToMinutes","deltaToHours","deltaToDays","floor","deltaToHoursOfDay","deltaToMinutesOfHour","deltaToSecondsOfMinute","deltaToParts","tAbs","abs","isNegative","days","hoursOfDay","minutesOfHour","secondsOfMinute","deltaPartsWithChange","deltaPartsOld","deltaPartsNew","new","BigNumber","NumberPartContainer","NumberPartLabel","NumberPartSeparator","NumberPart","TextClock","Infinity","tMinusParts","setTMinusParts","interval","window","setInterval","newState","clearInterval","padStart","HomeH1","TextClockContainer","Home","purchaseDialogOpen","setPurchaseDialogOpen","closeModal","confirm","Routes","props","exact","path","RoutingPaths","component","HomeView","StyledNavigation","viewportWidth","DesktopWrapper","DesktopLink","activeLink","DesktopLogo","img","NavList","ul","NavListItem","li","NavigationDesktop","logo","tabs","paths","history","useHistory","currentRoute","useLocation","push","pathname","includes","location","StyledBurger","open","Burger","setOpen","StyledMenu","nav","Menu","Wrapper","Logo","NavigationMobile","handler","node","listener","event","contains","document","addEventListener","removeEventListener","NavigationTabs","NavigationPaths","Navigation","innerHeight","innerWidth","dimensions","setDimensions","handleResize","NavigationLogo","createIo","ns","io","withCredentials","sessionHeartbeat","apiBase","info","transaction","PageWrapperDiv","App","loginDialogOpen","setLoginDialogOpen","alert","useAlert","then","meFromApi","catch","currentUserContextData","web3WrapperContextData","closeLoginModal","Provider","AlertContainerDiv","AlertCloseButton","AlertIconSpan","AlertTemplate","options","close","faInfo","faExclamation","colorBackground","lighten","darken","title","loadStripe","Modal","setAppElement","queryClient","QueryClient","setQueryLogger","args","apply","warn","alertOptions","positions","TOP_RIGHT","offset","transitions","SCALE","ReactDOM","render","StrictMode","template","QueryClientProvider","client","getElementById"],"mappings":"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","file":"static/js/main.073ffceb.chunk.js","sourcesContent":["const homeView: string = '/';\nconst myProfile: string = '/myprofile';\n\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\nexport default {\n\thomeView,\n\tmyProfile\n};\n","import { createContext, useContext } from \"react\";\nimport { Ios } from \"./service/api/io\";\nimport { UserDto } from \"./service/model/User\";\nimport Wallet from \"./service/eth/Wallet\";\n\nexport const IosContext = createContext<Ios | null>(null)\n\nexport function useIos() {\n  const ios = useContext(IosContext)\n  if (ios == null) throw new Error('IosContext is not initialized')\n  return ios\n}\n\nexport type RestData = {\n  base: string\n}\n\nexport const RestContext = createContext<RestData | null>(null)\n\nexport function useRest() {\n  const rest = useContext(RestContext)\n  if (rest == null) throw new Error('RestContext is not initialized')\n  return rest\n}\n\nexport interface WalletsProviderData {\n  wallets: Set<Wallet>,\n  setWallets: (setter: (currentWallets: Set<Wallet>) => Set<Wallet>) => void\n}\n\nexport const WalletsContext = createContext<WalletsProviderData | null>(null)\n\nexport function useWallets() {\n  const wallets = useContext(WalletsContext)\n  if (wallets == null) throw new Error('WalletsContext is not initialized')\n  return wallets\n}\n\nexport interface CurrentUserContextData {\n  currentUser: UserDto | null,\n  setCurrentUser: (currentUser: UserDto) => void,\n  nullCurrentUser: () => void, // To avoid type confusion\n  loginByModal: () => void\n}\n\nexport const CurrentUserContext = createContext<CurrentUserContextData | null>(null)\n\nexport function useCurrentUserDetails() {\n  const currentUserContext = useContext(CurrentUserContext)\n  if (currentUserContext == null) throw new Error('CurrentUserContext is not initialized')\n  return currentUserContext\n}\n","import { css } from \"styled-components\"\n\nexport const BaseText = css`\n  color: ${p => p.theme.color.text};\n  font-family: ${p => p.theme.font.text};\n`\n\nexport const BaseTitle = css`\n  color: ${p => p.theme.color.text};\n  font-family: ${p => p.theme.font.text};\n`\n","import styled from \"styled-components\";\nimport { BaseTitle } from \"./base\";\n\nexport const Button = styled.button`\n  ${BaseTitle}\n  border: 2px solid ${p => p.theme.color.border};\n  background-color: ${p => p.theme.color.surface};\n  padding: 0.5em 0.6em;\n  text-transform: uppercase;\n  font-size: 13pt;\n  font-weight: 800;\n  display: block;\n  margin-top: 1rem;\n  cursor: pointer;\n`\n\nexport const ButtonBig = styled(Button)`\n  font-size: 20pt;\n`\n\nexport const ImageButton = styled.button`\n  width: 5rem;\n  padding: 0;\n  background: none;\n  border: none;\n  cursor: pointer;\n  background-color: #f0f0f0;\n  border-radius: 4px;\n  width: 5rem;\n  height: 3rem;\n  padding: 0.5em;\n  margin-right: 0.5rem;\n  margin-bottom: 0.3rem;\n  box-shadow: 0.25rem 0.25rem #bbb;\n\n  > img {\n    max-width: 100%;\n    max-height: 100%;\n    /* fill: ; */\n    padding: 0;\n    margin: 0;\n  }\n`\n","import styled from \"styled-components\";\n\nexport const Section = styled.section`\n  margin-bottom: 2rem;\n`\n\nexport const MainWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nexport const Main = styled.main`\n  padding: 1rem 1.5rem;\n  max-width: 60rem;\n  width: 100%;\n\n  @media (min-width: 600px) {\n    padding: 3rem 5rem;\n  }\n`\n\nexport const HorizontalCenter = styled.div`\n  justify-content: center;\n  display: flex;\n`\n","import styled from \"styled-components\"\nimport { BaseText, BaseTitle } from \"./base\"\n\nexport const P = styled.p`\n  ${BaseText}\n  font-size: 14pt;\n`\n\nexport const A = styled.a`\n  ${BaseText}\n\n  color: ${p => p.theme.color.link};\n\n  &:visited {\n    color: ${p => p.theme.color.linkVisited};\n  }\n\n  &:hover {\n    color: ${p => p.theme.color.linkHover};\n  }\n\n  &:active {\n    color: ${p => p.theme.color.linkActive};\n    border: 1px dashed white;\n  }\n`\n\nexport const H1 = styled.h1`\n  ${BaseTitle}\n  font-size: 40pt;\n`\n\nexport const H2 = styled.h2`\n  ${BaseTitle}\n  font-size: 24pt;\n  margin-top: 0.2em;\n`\n\nexport const H3 = styled.h3`\n  ${BaseTitle}\n`\n\nexport const H4 = styled.h4`\n  ${BaseTitle}\n`\n\nexport const SpanItalic = styled.span`\n  font-style: italic;\n`\n\nexport const MonoData = styled.span`\n  font-family: monospace;\n  font-size: 12pt;\n`\n\nexport const Pre = styled.pre`\n  color: ${p => p.theme.color.text};\n`\n\nexport const PreItalic = styled(Pre)`\n  font-style: italic;\n`\n\nexport const StrongNumber = styled.strong`\n  font-size: 16pt;\n`\n","import styled from \"styled-components\";\n\nexport const ErrorP = styled.p`\n  color: red;\n`\n","import { FunctionComponent } from \"react\";\nimport { useCurrentUserDetails } from \"../../../contexts\";\nimport { ErrorP } from \"../../style/error\";\nimport { MonoData, P, SpanItalic } from \"../../style/text\";\n\nconst CurrentUserInfo: FunctionComponent<{}> = () => {\n  const { currentUser } = useCurrentUserDetails()\n\n  if (currentUser != null) {\n    return <>\n      <P>\n        Email address: <MonoData>{currentUser.email}</MonoData><br/>\n        <SpanItalic>We only use your email address to send transactional emails.</SpanItalic>\n      </P>\n      <P>\n        Ethereum address: <MonoData>{currentUser.ethAddress}</MonoData><br/>\n        All investment rewards for the ICO will be sent to this address.\n      </P>\n    </>\n  }\n\n  return <ErrorP>You need to be logged in to view your user info.</ErrorP>\n}\n\nexport default CurrentUserInfo\n","import { Socket } from \"socket.io-client\";\n\nconst DEFAULT_API_CALL_TIMEOUT = 7000\n\nexport type ApiResult<T> = {\n  data: T,\n  error: null\n} | {\n  data: null,\n  error: {\n    name: string | null,\n    message: string\n  }\n}\n\nexport abstract class ApiException extends Error {\n  constructor(message?: string) {\n    super(message)\n    this.name = 'ApiException'\n  }\n}\n\nexport class ApiCallTimeoutException extends ApiException {\n  constructor(message?: string) {\n    super(message)\n    this.name = 'ApiCallTimeoutException'\n  }\n}\n\nexport class UnknownApiException extends ApiException {\n  constructor(message: string) {\n    super(message)\n    this.name = 'UnknownApiException'\n  }\n}\n\nexport class NamedApiException extends ApiException {\n  originalName: string\n  originalMessage: string\n\n  constructor(name: string, message: string) {\n    super(`${name}: ${message}`)\n    this.name = 'NamedApiException'\n    this.originalMessage = message\n    this.originalName = name\n  }\n}\n\nexport function parseApiResult<T>(apiResponse: ApiResult<T>) {\n  if (apiResponse.error == null) {\n    return apiResponse.data\n  } else {\n    if (apiResponse.error.name == null) {\n      throw new UnknownApiException(apiResponse.error.message)\n    } else {\n      throw new NamedApiException(apiResponse.error.name, apiResponse.error.message)\n    }\n  }\n}\n\nexport function isNamedApiException(error: any, name: string) {\n  return error instanceof NamedApiException && error.originalName === name\n}\n\nexport function asyncApiCall<I = null, O = null>(\n  socket: Socket,\n  ev: string,\n  data: I | null = null,\n  timeout = DEFAULT_API_CALL_TIMEOUT\n) {\n  return new Promise<O>((resolve, reject) => {\n    setTimeout(() => reject(new ApiCallTimeoutException()), timeout)\n    socket.emit(\n      ev,\n      data,\n      (msg: ApiResult<O>) => {\n        try {\n          resolve(parseApiResult(msg))\n        } catch (error) {\n          reject(error)\n        }\n      }\n    );\n  })\n}\n","import { NamedApiException } from \"./service/api\"\n\nexport async function tryRetrow<T>(\n  tryBlock: () => Promise<T>,\n  retrowBlock: (e: any) => any\n) {\n  try {\n    return await tryBlock()\n  } catch (error) {\n    throw retrowBlock(error)\n  }\n}\n\nexport const ifElse = <I, E>(\n  condition: () => boolean | boolean,\n  ifBlock: () => I,\n  elseBlock: () => E\n) => (typeof condition === 'function' ? condition() : condition)\n  ? ifBlock()\n  : elseBlock()\n\nexport function markErrorProcessed(error: any) {\n  if (typeof error === 'object' && error != null) {\n    (error as any)['processed'] = true\n  }\n}\n\nexport function isErrorProcessed(error: any) {\n  return typeof error === 'object'\n    && error != null\n    && (error as any)['processed'] === true\n}\n\nexport function errorToString(error: any) {\n  if (error instanceof Error) {\n    if (error instanceof NamedApiException) {\n      return error.message\n    }\n    return `${error.name}: ${error.message}`\n  }\n  const stringRepresentation = `${error}`\n  if (stringRepresentation === '[object Object]') {\n    try {\n      return JSON.stringify(error)\n    } catch (error) {\n      // pass to fallback\n    }\n  }\n  return stringRepresentation\n}\n","import React from \"react\";\nimport { FunctionComponent } from \"react\";\nimport { P, A } from \"../style/text\";\n\nconst ErrorContactInfo: FunctionComponent<{}> = () => <P>\n  Please contact us at{' '}\n  <A href={`mailto:info@artvalue.org`}>info@artvalue.org</A>{' '}\n  and we will help to resolve the problem.\n</P>\n\nexport default ErrorContactInfo\n","import React, { FunctionComponent } from \"react\";\nimport { errorToString } from \"../../util\";\nimport { ErrorP } from \"../style/error\";\nimport { P } from \"../style/text\";\nimport ErrorContactInfo from \"./ErrorContactInfo\";\n\nconst GenericError: FunctionComponent<{\n  error: any\n}> = ({ error, children }) => <>\n  <P>{children}</P>\n  <ErrorP>{errorToString(error)}</ErrorP>\n  <ErrorContactInfo />\n</>\n\nexport default GenericError\n","import { FunctionComponent } from \"react\"\nimport styled from \"styled-components\"\n\nconst RingContainer = styled.div`\n  display: inline-block;\n  position: relative;\n  overflow: visible;\n  width: 80px;\n  height: 80px;\n\n  @keyframes loadingRingKf {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n`\n\nconst RingPart = styled.div`\n  box-sizing: border-box;\n  display: block;\n  position: absolute;\n  width: 64px;\n  height: 64px;\n  margin: 8px;\n  border: 8px solid #fff;\n  border-radius: 50%;\n  animation: loadingRingKf 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  border-color: #fff transparent transparent transparent;\n\n  &:nth-child(1) {\n    animation-delay: -0.45s;\n  }\n  \n  &:nth-child(2) {\n    animation-delay: -0.3s;\n  }\n\n  &:nth-child(3) {\n    animation-delay: -0.15s;\n  }\n`\n\nconst LoadingRing: FunctionComponent<{}> = () => (\n  <RingContainer>\n    <RingPart />\n    <RingPart />\n    <RingPart />\n    <RingPart />\n  </RingContainer>\n)\n\nexport default LoadingRing\n","import { Socket } from \"socket.io-client\";\nimport Web3 from \"web3\";\nimport { ApiResult, asyncApiCall, parseApiResult } from \".\";\nimport { tryRetrow } from \"../../util\";\nimport Wallet from \"../eth/Wallet\";\nimport { UserDto } from \"../model/User\";\n\nexport async function getMe(\n  authIo: Socket\n) {\n  return await asyncApiCall<null, UserDto>(authIo, 'me')\n}\n\nexport class SigningDeniedException extends Error {\n  constructor(message?: string) {\n    super(message)\n    this.name = 'SigningDeniedException'\n  }\n}\n\nexport async function authenticateThroughWeb3(\n  authIo: Socket,\n  web3: Web3,\n  address: string\n) {\n  const signedVerifier = await asyncApiCall<null, string>(authIo, 'verifier')  \n  const signedVerifierHash = web3.eth.accounts.hashMessage(signedVerifier)\n  const userSignature = await tryRetrow(\n    async () => await web3.eth.sign(signedVerifierHash, address),\n    e => {\n      if (e.message === 'User denied message signature.') {\n        return new SigningDeniedException()\n      }\n      return e\n    }\n  )\n\n  const user = await asyncApiCall<any, UserDto | null>(\n    authIo,\n    'authenticate',\n    { signedVerifier, address, userSignature }\n  )\n\n  return user\n}\n\nexport async function signUp(\n  authIo: Socket,\n  web3: Web3,\n  wallet: Wallet,\n  email: string\n) {\n  const signedVerifier = await asyncApiCall<null, string>(authIo, 'verifier')  \n  const signedVerifierHash = web3.eth.accounts.hashMessage(signedVerifier)\n  const userSignature = await web3.eth.sign(signedVerifierHash, wallet.address)\n\n  const user = await asyncApiCall<any, UserDto>(\n    authIo,\n    'signUp',\n    { signedVerifier, userSignature, address: wallet.address, providerType: wallet.providerType, email }\n  )\n\n  return user\n}\n\nexport async function logOut(base: string) {\n  const res = await fetch(`${base}/logout`, {\n    method: 'POST',\n    credentials: 'include'\n  })\n  const apiResult = await res.json() as ApiResult<null>\n  return parseApiResult(apiResult)\n}\n\n","import { FunctionComponent, useEffect } from \"react\";\nimport { useMutation } from \"react-query\";\nimport { useCurrentUserDetails, useIos, useRest } from \"../../../contexts\";\nimport { Button } from \"../../style/button\";\nimport { P } from \"../../style/text\";\nimport GenericError from \"../GenericError\";\nimport LoadingRing from \"../LoadingRing\";\nimport * as authApi from \"../../../service/api/auth\";\n\nconst LogOut: FunctionComponent = () => {\n  const { base: restApiBase } = useRest()\n  const { nullCurrentUser } = useCurrentUserDetails()\n  const logOutMutation = useMutation(\n    () => authApi.logOut(restApiBase)\n  )\n\n  useEffect(() => {\n    if (logOutMutation.isSuccess) {\n      nullCurrentUser()\n    }\n  }, [logOutMutation.isSuccess])\n\n  if (logOutMutation.isLoading) {\n    return <>\n      <P>Logging you out...</P>\n      <LoadingRing />\n    </>\n  } else if (logOutMutation.isError) {\n    return <>\n      <GenericError error={logOutMutation.error}>\n        An error occured while logging out\n      </GenericError>\n      <Button onClick={() => logOutMutation.mutate()}>Try again</Button>\n    </>\n  } else if (logOutMutation.isSuccess) {\n    return <P>Successfully logged out.</P>\n  }\n  \n  return <form onSubmit={e => {\n    e.preventDefault()\n    logOutMutation.mutate()\n  }}>\n    <Button type=\"submit\">\n      Log out\n    </Button>\n  </form>\n}\n\nexport default LogOut\n","import BN from \"bn.js\"\n\nexport interface DepositDto {\n  uuid: string,\n  user: string,\n  amount: string,\n  timeCreated: number,\n  priceEther: string,\n  gasPrice: string,\n  ethTxHash: string | null,\n  isVerified: boolean\n}\n\nexport default class Deposit {\n  readonly uuid: string\n  readonly user: string\n  readonly amount: BN\n  readonly timeCreated: number\n  readonly priceEther: BN\n  readonly gasPrice: BN\n  readonly ethTxHash: string | null\n  readonly isVerified: boolean\n\n  constructor(\n    uuid: string,\n    user: string,\n    amount: BN,\n    timeCreated: number,\n    priceEther: BN,\n    gasPrice: BN,\n    ethTxHash: string | null,\n    isVerified: boolean\n  ) {\n    this.uuid = uuid\n    this.user = user\n    this.amount = amount\n    this.timeCreated = timeCreated\n    this.priceEther = priceEther\n    this.gasPrice = gasPrice\n    this.ethTxHash = ethTxHash\n    this.isVerified = isVerified\n  }\n\n  static fromDto(dto: DepositDto): Deposit {\n    return new Deposit(\n      dto.uuid,\n      dto.user,\n      new BN(dto.amount, 'hex'),\n      dto.timeCreated,\n      new BN(dto.priceEther, 'hex'),\n      new BN(dto.gasPrice, 'hex'),\n      dto.ethTxHash,\n      dto.isVerified\n    )\n  }\n}\n","import BN from \"bn.js\"\nimport { Socket } from \"socket.io-client\"\nimport { asyncApiCall } from \".\"\nimport Deposit, { DepositDto } from \"../model/Deposit\"\n\nexport async function createDeposit(\n  depositIo: Socket,\n  amount: BN\n) {\n  return Deposit.fromDto(await asyncApiCall<any, DepositDto>(\n    depositIo,\n    'create',\n    { amount }\n  ))\n}\n\nexport async function setDepositEthTxHash(\n  depositIo: Socket,\n  deposit: Deposit,\n  ethTxHash: string\n) {\n  return Deposit.fromDto(await asyncApiCall<any, DepositDto>(\n    depositIo,\n    'setEthTxHash',\n    { uuid: deposit.uuid, ethTxHash }\n  ))\n}\n\nexport async function verifyDeposit(\n  depositIo: Socket,\n  deposit: Deposit\n) {\n  return Deposit.fromDto(await asyncApiCall<any, DepositDto>(\n    depositIo,\n    'verify',\n    { uuid: deposit.uuid }\n  ))\n}\n\nexport async function getMyDeposits(\n  depositIo: Socket\n) {\n  return (await asyncApiCall<any, DepositDto[]>(\n    depositIo,\n    'getMine',\n    {}\n  )).map(Deposit.fromDto)\n}\n\nexport async function getMyPaidDeposits(\n  depositIo: Socket\n) {\n  return (await asyncApiCall<any, DepositDto[]>(\n    depositIo,\n    'getMinePaid',\n    {}\n  )).map(Deposit.fromDto)\n}\n","import BN from \"bn.js\"\n\nexport const weiToEtherStr = (wei: BN) => (wei.div(new BN('1000000000')).toNumber() / 1000000000).toString()\nexport const weiToGweiStr = (wei: BN) => (wei.toNumber() / 1000000000).toString()\n","export type ChainId = keyof typeof web3networks\n\nexport const web3networks = {\n  1: {\n    name: \"Ethereum\",\n    portisName: 'mainnet',\n    explorerTx: \"https://etherscan.io/tx\",\n    explorerAddress: \"https://etherscan.io/address\"\n  },\n  3: {\n    name: \"Ethereum (ropsten)\",\n    portisName: 'ropsten',\n    explorerTx: \"https://ropsten.etherscan.io/tx\",\n    explorerAddress: \"https://ropsten.etherscan.io/address\"\n  },\n  4: {\n    name: \"Ethereum (rinkeby)\",\n    portisName: 'rinkeby',\n    explorerTx: \"https://rinkeby.etherscan.io/tx\",\n    explorerAddress: \"https://rinkeby.etherscan.io/address\"\n  },\n  5: {\n    name: \"Ethereum (goerli)\",\n    portisName: 'goerli',\n    explorerTx: \"https://blockscout.com/eth/goerli/tx\",\n    explorerAddress: \"https://blockscout.com/eth/goerli/address\"\n  },\n  42: {\n    name: \"Ethereum (kovan)\",\n    portisName: 'kovan',\n    explorerTx: \"https://blockscout.com/eth/kovan/tx\",\n    explorerAddress: \"https://blockscout.com/eth/kovan/address\"\n  }\n}\n\nexport function txHashToExplorerUrl(chainId: ChainId, txHash: string) {\n  const networkInfo = web3networks[chainId]\n  return `${networkInfo.explorerTx}/${txHash}`\n}\n","export class NumberFormatException extends Error {\n  constructor(message: string) {\n    super(message)\n    this.name = 'NumberFormatException'\n  }\n}\n\nexport class TooManyDecimalSeparatorsException extends NumberFormatException {\n  constructor(message: string) {\n    super(message)\n    this.name = 'TooManyDecimalSeparatorsException'\n  }\n}\n\nexport class InvalidCharacterException extends NumberFormatException {\n  constructor(message: string) {\n    super(message)\n    this.name = 'InvalidCharacterException'\n  }\n}\n\nexport class FrationalPartTooLargeException extends NumberFormatException {\n  constructor(message: string) {\n    super(message)\n    this.name = 'FrationalPartTooLargeException'\n  }\n}\n","import BN from \"bn.js\";\nimport trimEnd from \"lodash/trimEnd\";\nimport { FrationalPartTooLargeException, InvalidCharacterException, TooManyDecimalSeparatorsException } from \"./exceptions\";\n\nexport const TWO_NBRO_FRACTION_DIGITS = 2 // 824.12 => 824 + 12 * 100 = 82412 fractionless\nconst decimalSeparatorRegex = /[\\.\\,]/g\nconst nonNumericRegex = /[^\\d]/\nexport const browserDecimalSeparator = (1.1).toLocaleString().substring(1, 2)\nexport const toFractionFactor = (nbroFractionDigits: number) => new BN(10).pow(new BN(nbroFractionDigits))\n\nexport function fractionlessToString(\n  number: BN,\n  maxNbroFractionDigits = TWO_NBRO_FRACTION_DIGITS\n) {\n  const fractionFactor = toFractionFactor(maxNbroFractionDigits)\n\n  const integerPart = number.div(fractionFactor)\n  const fractionalPart = number.sub(integerPart.mul(fractionFactor))\n  const integerPartStr = integerPart.toString(10)\n  const fractionalPartStr = fractionalPart.toString(10, maxNbroFractionDigits)\n  if (fractionalPart.isZero()) {\n    return integerPartStr\n  } else {\n    return integerPartStr + browserDecimalSeparator + fractionalPartStr\n  }\n}\n\nexport function fractionlessNumberFromString(\n  numberString: string,\n  decimalSeparator = browserDecimalSeparator,\n  maxNbroFractionDigits = TWO_NBRO_FRACTION_DIGITS,\n  throwOnTooLargeFractionPart = false\n): {\n  withDecimalSeparator: string,\n  number: BN\n} | null {\n  const fractionFactor = toFractionFactor(maxNbroFractionDigits)\n\n  if (numberString.length === 0) return null\n  const numberParts = numberString.split(decimalSeparator)\n  if (numberParts.length > 2) {\n    throw new TooManyDecimalSeparatorsException(\n      `Found ${numberParts.length-1} decimal separators `\n      + `(${decimalSeparator}). Only one is allowed.`\n    )\n  }\n  const [integerPartStr, fractionPartStr] = numberParts\n\n  // Parse integer part\n  const integerPartWoDecimalSeparators = integerPartStr\n    .replace(decimalSeparatorRegex, '')\n  throwOnNonNumeric(integerPartWoDecimalSeparators, 'Integer part')\n  const integerPart = new BN(integerPartWoDecimalSeparators, 10)\n  const fractionlessIntegerPart = integerPart.mul(fractionFactor)\n  \n  if (numberParts.length === 1) return {\n    number: fractionlessIntegerPart,\n    withDecimalSeparator: integerPart.toString(10)\n  }\n\n  // Parse fraction part\n  throwOnNonNumeric(fractionPartStr, 'Fraction part')\n  const fractionPartDigits = fractionPartStr.length\n  if (throwOnTooLargeFractionPart && fractionPartDigits > maxNbroFractionDigits) {\n    throw new FrationalPartTooLargeException(\n      `Fractional part (${fractionPartStr}) of ${numberString} has more `\n      + `digits than allowed (${maxNbroFractionDigits})`\n    )\n  }\n\n  if (fractionPartDigits === 0) {\n    return {\n      number: fractionlessIntegerPart,\n      withDecimalSeparator: integerPart.toString(10) + decimalSeparator\n    }\n  }\n\n  const slicedAndPaddedFractionPart = fractionPartStr\n    .slice(0, maxNbroFractionDigits)\n    .padEnd(maxNbroFractionDigits, '0')\n  const fractionPart = new BN(slicedAndPaddedFractionPart, 10)\n\n  const processedFractionPartStr = fractionPart.toString(10, Math.min(fractionPartDigits, maxNbroFractionDigits))\n  const lastZeroIndex = processedFractionPartStr.lastIndexOf('0')\n  const trimmedProcessedFractionPartStr = processedFractionPartStr.slice(\n    0,\n    Math.max(lastZeroIndex, fractionPartDigits)\n  )\n  \n  return {\n    number: fractionlessIntegerPart.add(fractionPart),\n    withDecimalSeparator: integerPart.toString(10) + decimalSeparator + trimmedProcessedFractionPartStr\n  }\n}\n\nfunction throwOnNonNumeric(string: string, stringName: string) {\n  const nonNumeric = string.match(nonNumericRegex)\n  if (nonNumeric != null) {\n    const index = nonNumeric.index\n    throw new InvalidCharacterException(\n      `${stringName} contains an invalid character (character `\n      + (index != null ? (index + 1).toString() : '?')\n      + ` of '${string}': '${nonNumeric[0]}')`\n    )\n  }\n}\n","import BN from \"bn.js\";\nimport { ChainId } from \"./service/eth/networks\";\n\nexport default {\n  etherToAddress: '0x9306DEF3aE932e4959a725Cd3B4f323435265d5c',\n  frontend: {\n    chainId: 1 as ChainId,\n    minimumConfirmations: 5 // 4 on backend as buffer\n  },\n  stages: {\n    presale: {\n      minAmount: new BN('20000'),\n      depositPercentage: new BN('20')\n    }\n  }\n}\n","import { faCheck, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { FunctionComponent } from \"react\";\nimport { useTheme } from \"styled-components\";\nimport { txHashToExplorerUrl } from \"../../service/eth/networks\";\nimport { weiToEtherStr, weiToGweiStr } from \"../../service/eth/util\";\nimport Deposit from \"../../service/model/Deposit\";\nimport { fractionlessToString } from \"../../service/number\";\nimport { Button } from \"../style/button\";\nimport { H2, MonoData, P, SpanItalic } from \"../style/text\";\nimport config from \"../../config\";\n\nconst DepositDetails: FunctionComponent<{\n  deposit: Deposit,\n  onLaunchVerification: () => void\n}> = ({ deposit, onLaunchVerification }) => {\n  const theme = useTheme()\n\n  return <>\n    <H2>Deposit</H2>\n    <P>\n      Amount: <MonoData>{fractionlessToString(deposit.amount)}</MonoData><br/>\n      Creation time: <MonoData>{(new Date(deposit.timeCreated*1000)).toLocaleString()}</MonoData><br/>\n      Deposit price (Ether): <MonoData>{weiToEtherStr(deposit.priceEther)}</MonoData><br/>\n      Gas price (Gwei): <MonoData>{weiToGweiStr(deposit.gasPrice)}</MonoData><br/>\n      Transaction hash: {deposit.ethTxHash == null\n        ? <SpanItalic>Not yet created</SpanItalic>\n        : <>\n          <MonoData>{deposit.ethTxHash}</MonoData>{' '}\n          (<a\n            href={txHashToExplorerUrl(config.frontend.chainId, deposit.ethTxHash)}\n            target=\"_blank\" rel=\"noreferrer\">\n            View on etherscan\n          </a>)\n        </>\n      } <br/>\n      Verified: {deposit.isVerified\n        ? <FontAwesomeIcon icon={faCheck} color={theme.color.success} />\n        : <FontAwesomeIcon icon={faTimes} color={theme.color.error} />\n      } <br/>\n      UUID: <MonoData>{deposit.uuid}</MonoData>\n    </P>\n    {!deposit.isVerified\n       ? <Button onClick={() => onLaunchVerification()}>Verify</Button>\n       : ''\n    }\n  </>\n}\n\nexport default DepositDetails\n","import styled, { css } from \"styled-components\"\nimport { BaseText } from \"./base\"\n\nexport const Table = styled.table`\n  ${BaseText}\n  border-collapse: collapse;\n`\n\nconst thTdCommon = css`\n  padding: 0.7em 0.6em;\n`\n\nexport const Th = styled.th`\n  ${thTdCommon}\n\n  border-right: 1px solid white;\n\n  &:last-child {\n    border-right: none;\n  }\n`\n\nexport const Tr = styled.tr`\n  ${thTdCommon}\n  border-bottom: 1px solid white;\n\n  &:last-child {\n    border-bottom: none;\n  }\n`\n\nexport const TrHead = styled(Tr)`\n  border-bottom: 1px solid white;\n\n  &:last-child {\n    border-bottom: 1px solid white;\n  }\n`\n\nexport const Td = styled.td`\n  ${thTdCommon}\n  border-right: 1px solid white;\n\n  &:last-child {\n    border-right: none;\n  }\n`\n\nexport const TdAlignRight = styled(Td)`\n  text-align: right;\n`\nexport const TdItalic = styled(Td)`\n  font-style: italic;\n`\n\nexport const TdIconContainer =styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n","import { Children, FunctionComponent } from \"react\"\nimport styled from \"styled-components\";\n\nconst SlidesContCont = styled.div`\n  overflow: hidden;\n  width: 100%;\n`\n\nconst SlidesCont = styled.div`\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  padding: 0;\n  transform: 'translateZ(0)';\n`\n\nconst Step: FunctionComponent<{\n  numberOfSteps: number,\n  index: number\n}> = ({\n  children,\n  numberOfSteps,\n  index\n}) => {\n  const transition = (duration = '1', items = 'all') => `${items} ${duration}s cubic-bezier(0.23, 1, 0.32, 1)`;\n\n  return (\n    <div className=\"Step\" style={{\n      width: `${100 / numberOfSteps}%`,\n      transition: transition()\n    }}>\n      {children}\n    </div>\n  )\n}\n\ntype CarouselProps = {\n  currentIndex: number\n}\n\nconst Carousel: FunctionComponent<CarouselProps> = ({children, currentIndex}) => {\n  if (children == null) throw new Error(\"Carousel must have children\")\n  if (currentIndex < 0) throw new Error(\"Carousel index must be greater than or equal to 0\")\n  if (currentIndex >= Children.count(children)) throw new Error(\"Carousel index must be smaller than the number of children\")\n\n  // const transition = (duration = '1', items = 'all') => `${items} ${duration}s cubic-bezier(0.23, 1, 0.32, 1)`;\n\n  return (<SlidesContCont>\n    <SlidesCont style={{\n      width: `${Children.count(children) * 100}%`,\n      marginLeft: `-${currentIndex * 100}%`\n    }}>\n      {Children.map(children, (child, index) => (\n        <Step key={index} index={index} numberOfSteps={Children.count(children)}>\n          {child}\n        </Step>\n      ))}\n    </SlidesCont>\n  </SlidesContCont>)\n}\n\nexport default Carousel\n","import React, { FunctionComponent } from \"react\";\nimport { weiToEtherStr } from \"../../../service/eth/util\";\nimport Deposit from \"../../../service/model/Deposit\";\nimport { fractionlessToString } from \"../../../service/number\";\nimport { Button } from \"../../style/button\";\nimport { A, H2, P } from \"../../style/text\";\nimport ErrorContactInfo from \"../ErrorContactInfo\";\n\nconst SuccessSlide: FunctionComponent<{\n  deposit: Deposit,\n  onClose: () => void\n}> = ({ deposit, onClose }) => {\n  return <>\n    <H2>Congratulations!</H2>\n    <P>\n      The {weiToEtherStr(deposit.priceEther)} Ether deposit for your €{fractionlessToString(deposit.amount)} investment was successful.\n    </P>\n    <P>\n      You will receive an email from us confirming the deposit.\n    </P>\n    <P>\n      Do not hesitate to <A href=\"mailto:info@artvalue.org\">contact us</A> at if you have any other questions.\n    </P>\n\n    <Button onClick={() => onClose()}>Continue</Button>\n  </>\n}\n\nexport default SuccessSlide\n","import React, { FunctionComponent, useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useIos } from \"../../../contexts\";\nimport { verifyDeposit } from \"../../../service/api/deposit\";\nimport Deposit from \"../../../service/model/Deposit\";\nimport { errorToString } from \"../../../util\";\nimport { Button } from \"../../style/button\";\nimport { ErrorP } from \"../../style/error\";\nimport { H2, P } from \"../../style/text\";\nimport GenericError from \"../GenericError\";\nimport LoadingRing from \"../LoadingRing\";\n\nconst VerifyDepositSlide: FunctionComponent<{\n  deposit: Deposit,\n  onVerified: (deposit: Deposit) => void\n}> = ({ deposit, onVerified }) => {\n  const { deposit: depositIo } = useIos()\n  const [callbackCalled, setCallbackCalled] = useState(false)\n  const qDepositVerification = useQuery(\n    ['deposit', 'verify', deposit.uuid],\n    () => verifyDeposit(depositIo, deposit)\n  )\n\n  useEffect(() => {\n    if (!callbackCalled && qDepositVerification.isSuccess) {\n      setCallbackCalled(true)\n      onVerified(qDepositVerification.data!!)\n    }\n  }, [qDepositVerification.isSuccess])\n\n  return <>\n    <H2>Verify deposit</H2>\n    {(() => {\n      if (qDepositVerification.isLoading) {\n        return <>\n          <P>Verifying your deposit...</P>\n          <P>\n            This can take up to 10 minutes.\n            You can check back later in your profile.\n          </P>\n          <LoadingRing />\n        </>\n      } else if (qDepositVerification.isError) {\n        return <>\n          <GenericError error={qDepositVerification.error}>\n            An error occured while trying to verify the deposit\n          </GenericError>\n          <P>\n            It is possible that the server and your browser are slightly out of sync.\n            You can try verifying the deposit later by going to \"My profile\".\n          </P>\n          <Button onClick={() =>qDepositVerification.refetch()}>Try again</Button>\n        </>\n      }\n\n      return <>\n        <P>Verification successful</P>\n        <Button onClick={() => onVerified(qDepositVerification.data!!)}>\n          Continue\n        </Button>\n      </>\n    })()}\n  </>\n}\n\nexport default VerifyDepositSlide\n","import { useEffect } from \"react\";\nimport { FunctionComponent, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport Web3 from \"web3\";\nimport { ChainId, txHashToExplorerUrl } from \"../../../service/eth/networks\";\nimport { Button } from \"../../style/button\";\nimport { A, H2, P, StrongNumber } from \"../../style/text\";\nimport LoadingRing from \"../LoadingRing\";\nimport { TransactionReceipt } from \"web3-core\";\nimport GenericError from \"../GenericError\";\nimport config from \"../../../config\";\n\nclass NotConfirmedYetException extends Error {\n  confirmations: number;\n\n  constructor(confirmations: number) {\n    super()\n    this.confirmations = confirmations\n  }\n}\n\nconst ConfirmEthTxSlide: FunctionComponent<{\n  web3: Web3,\n  chainId: ChainId,\n  txReceipt: TransactionReceipt,\n  onTransactionConfirmed: () => void\n}> = ({ web3, chainId, txReceipt, onTransactionConfirmed }) => {\n  const [callbackCalled, setCallbackCalled] = useState(false)\n  const [confirmations, setConfirmations] = useState(0)\n  const qBlockNumber = useQuery(\n    ['web3', web3.eth.getBlockNumber.name],\n    async () => {\n      const blockNumber = await web3.eth.getBlockNumber()\n      const newConfirmations = blockNumber - txReceipt.blockNumber\n      setConfirmations(newConfirmations)\n      if (newConfirmations <= config.frontend.minimumConfirmations) {\n        throw new NotConfirmedYetException(newConfirmations)\n      }\n      return newConfirmations\n    },\n    {\n      retry: (_, error) => {\n        if (error instanceof NotConfirmedYetException) {\n          return true\n        }\n        return false\n      },\n      retryDelay: 1000\n    }\n  )\n\n  useEffect(() => {\n    if (!callbackCalled && confirmations >= config.frontend.minimumConfirmations) {\n      setCallbackCalled(true)\n      onTransactionConfirmed()\n    }\n  }, [confirmations])\n\n  return <>\n    <H2>Confirm transaction</H2>\n    {(() => {\n      if (qBlockNumber.isError) {\n        return <>\n          <GenericError error={qBlockNumber.error}>\n            An error occured while confirming the transaction\n          </GenericError>\n          <Button onClick={() => qBlockNumber.refetch()}>Try again</Button>\n        </>\n      }\n\n      if (confirmations < config.frontend.minimumConfirmations) {\n        return <>\n          <P>Waiting for at least {config.frontend.minimumConfirmations} confirmations...</P>\n          <P>\n            This can take up to 10 minutes.\n            You can safely close this window and come back later to the \"My Profile\" page to finish the deposit validation.<br/>\n            <A href={txHashToExplorerUrl(chainId, txReceipt.transactionHash)} target=\"_blank\">\n              View this transaction on Etherscan\n            </A>\n          </P>\n          <P><StrongNumber>{confirmations}</StrongNumber>/{config.frontend.minimumConfirmations} confirmations</P>\n          <LoadingRing />\n        </>\n      }\n\n      return (<>\n        <P>Transaction confirmed!</P>\n        <Button\n          onClick={() => onTransactionConfirmed()}>\n          Continue\n        </Button>\n      </>)\n\n    })()}\n  </>\n}\n\nexport default ConfirmEthTxSlide\n","import detectEthereumProvider from '@metamask/detect-provider';\nimport { provider as Provider } from \"web3-core\";\nimport { ProviderType } from \"./ProviderType\";\nimport Portis from \"@portis/web3\"\nimport { ChainId, web3networks } from './networks';\n\nexport class BrowserWalletNotFoundException extends Error {\n  constructor(message?: string) {\n    super(message)\n    this.name = 'BrowserWalletNotFoundException'\n  }\n}\n\nexport async function createProvider(providerType: ProviderType, chainId: ChainId) {\n  if (providerType === 'portis') return createPortisProvider(chainId)\n  else if (providerType === 'browser') return await createBrowserProvider()\n  else throw Error('Unknown ProviderType')\n}\n\nexport function createPortisProvider(chainId: ChainId) {\n  return new Portis(\n    `79582b9a-9e5b-4ae6-b7ec-643a28136c09`,\n    web3networks[chainId].portisName, { scope: ['email'] }\n  ).provider as Provider\n}\n\nexport async function createBrowserProvider(): Promise<Provider> {\n  const provider = (await detectEthereumProvider({\n    silent: true,\n    timeout: 2000\n  })) as Provider | null\n  if (provider === null) throw new BrowserWalletNotFoundException()\n  await (provider as any).request({ method: 'eth_requestAccounts' });\n  return provider\n}\n","import React, { Children, FunctionComponent } from \"react\";\nimport styled from \"styled-components\";\nimport { P } from \"../style/text\";\nimport LoadingRing from \"./LoadingRing\";\n\nconst LoadingRingContainer = styled.div`\n  justify-content: center;\n  display: flex;\n  margin: 2rem 2rem;\n`\n\nconst Loading: FunctionComponent<{}> = ({ children }) => {\n  const childCount = Children.count(children)\n  if (childCount <= 0) {\n    throw new Error('Loading components must have at least one child')\n  }\n  return <div>\n    {children},\n    <LoadingRingContainer><LoadingRing /></LoadingRingContainer>\n  </div>\n}\n\nexport default Loading\n","import styled from \"styled-components\";\nimport { BaseText } from \"./base\";\n\nexport const Label = styled.label`\n  ${BaseText}\n  font-size: 14pt;\n  max-width: 70%;\n  display: block;\n`\n\nexport const Input = styled.input`\n  ${BaseText}\n  background-color: transparent;\n  border: 0.13rem solid ${p => p.theme.color.border};\n  padding: 0.5rem;\n  display: block;\n  width: 100%;\n  margin-top: 0.5rem;\n`\n","import React, { FunctionComponent, useState } from \"react\"\nimport { useWallets } from \"../../../contexts\"\nimport Wallet from \"../../../service/eth/Wallet\"\nimport { Button } from \"../../style/button\"\nimport { Label } from \"../../style/form\"\nimport { P } from \"../../style/text\"\n\nconst SelectExistingWalletForm: FunctionComponent<{\n  onWalletSelected: (wallet: Wallet) => void\n}> = ({ onWalletSelected }) => {\n  const { wallets: walletsSet, setWallets } = useWallets()\n  const wallets = Array.from(walletsSet)\n  const firstWallet = wallets[0]\n  const [chosenWallet, setChosenWallet] = useState(firstWallet)\n\n  if (wallets.length === 0) {\n    return (<P>No wallets to choose from</P>)\n  }  else {\n    return (<form onSubmit={e => {\n      e.preventDefault()\n      setWallets(currentWallets => new Set([...currentWallets, chosenWallet]))\n      onWalletSelected(chosenWallet)\n    }}>\n      {wallets.map(wallet => {\n        const key = wallet.providerType + wallet.address\n        return (<Label key={key}>\n          <input\n            type=\"radio\"\n            name=\"account\"\n            value={wallet.providerType + wallet.address}\n            defaultChecked={wallet === firstWallet}\n            onChange={() => setChosenWallet(wallet)} />\n          {wallet.providerType}: {wallet.address}\n        </Label>)\n      })}\n      <Button type=\"submit\" value=\"portis\">\n        Use this address\n      </Button>\n    </form>)\n  }\n}\n\nexport default SelectExistingWalletForm\n","import React, { FunctionComponent, useState } from \"react\";\nimport { Button } from \"../../style/button\";\nimport { Label } from \"../../style/form\";\nimport { P } from \"../../style/text\";\nimport styled from \"styled-components\";\n\nconst UseAddressButton = styled(Button)`\n  margin-top: 2rem;\n`\n\nconst SelectNewWalletAddressForm: FunctionComponent<{\n  addresses: string[],\n  onAddressSelected: (address: string) => void\n}> = ({ addresses, onAddressSelected }) => {\n  const firstAddress = addresses[0]\n  const [selectedAddress, setSelectedAddress] = useState(firstAddress)\n  if (firstAddress == null) return (<>\n    <P>\n      No wallets found, initialize your selected provider \n      with an Ethereum wallet and try again.\n    </P>\n  </>)\n  return (<form onSubmit={e => {\n    e.preventDefault()\n    onAddressSelected(selectedAddress)\n  }}>\n    {addresses.map((address) => (\n      <Label key={address}>\n        <input\n          type=\"radio\"\n          name=\"account\"\n          value={address}\n          defaultChecked={address === firstAddress}\n          onChange={() => setSelectedAddress(address)} />\n        {address}\n      </Label>\n    ))}\n    <UseAddressButton type=\"submit\" value=\"portis\">\n      Use this address\n    </UseAddressButton>\n  </form>)\n}\n\nexport default SelectNewWalletAddressForm\n","import React, { FunctionComponent, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport styled from \"styled-components\";\nimport Web3 from \"web3\";\nimport { useWallets } from \"../../../contexts\";\nimport { createProvider, BrowserWalletNotFoundException } from \"../../../service/eth/providers\";\nimport { ProviderType } from \"../../../service/eth/ProviderType\";\nimport Wallet from \"../../../service/eth/Wallet\";\nimport { Button, ImageButton } from \"../../style/button\";\nimport { ErrorP } from \"../../style/error\";\nimport { A, H2, H3, P } from \"../../style/text\";\nimport Loading from \"../Loading\";\nimport LoadingRing from \"../LoadingRing\";\nimport SelectExistingWalletForm from \"./SelectExistingWalletForm\";\nimport SelectNewWalletAddressForm from \"./SelectNewWalletAddressForm\";\nimport config from \"../../../config\";\n\nconst SelectWallet: FunctionComponent<{\n  onWalletSelected: (wallet: Wallet) => void\n}> = ({ onWalletSelected }) => {  \n  const { wallets: walletsSet, setWallets } = useWallets()\n  const wallets = Array.from(walletsSet.values())\n  const [newWalletProviderType, setNewWalletProviderType] = useState<ProviderType | null>(null)\n  const qNewWalletProvider = useQuery(\n    ['provider', newWalletProviderType],\n    () => createProvider(newWalletProviderType!!, config.frontend.chainId),\n    { enabled: newWalletProviderType != null, retry: false }\n  )\n  const web3 = qNewWalletProvider.data == null ? null : new Web3(qNewWalletProvider.data)\n  const qAccounts = useQuery(\n    ['provider', newWalletProviderType, 'account'],\n    () => web3!!.eth.getAccounts(),\n    { enabled: web3 != null }\n  )\n\n  const handlePortisClick = () => setNewWalletProviderType('portis')\n  const handleBrowserWalletClick = () => setNewWalletProviderType('browser')\n  const handleSelectDifferent = () => setNewWalletProviderType(null)\n\n  return (<>\n    <H3>Choose an existing wallet</H3>\n    {wallets.length > 0\n      ? <SelectExistingWalletForm onWalletSelected={onWalletSelected} />\n      : <P>You don't have any existing wallets</P>\n    }\n    <H3>Connect a new wallet</H3>\n    {newWalletProviderType == null\n      ? <form onSubmit={e => e.preventDefault()}>\n        <ImageButton type=\"submit\" value=\"portis\" onClick={handlePortisClick}>\n          <img src={process.env.PUBLIC_URL + '/icon/portis.png'} alt=\"Portis\" />\n        </ImageButton>\n        <ImageButton type=\"submit\" value=\"crypto\" onClick={handleBrowserWalletClick}>\n          <img src={process.env.PUBLIC_URL + '/icon/metamask.svg'} alt=\"Metamask\" />\n        </ImageButton>\n        <ImageButton type=\"submit\" value=\"crypto\" onClick={handleBrowserWalletClick}>\n        <img src={process.env.PUBLIC_URL + '/icon/globe.svg'} alt=\"Other browser wallet\" />\n        </ImageButton>\n      </form>\n      : <>\n        {qNewWalletProvider.isLoading\n          ? <>\n            <P>Loading provider…</P>\n            <LoadingRing />\n          </>\n          : qNewWalletProvider.isError\n            ? <ErrorP>\n              Error loading provider: <br/>\n              {qNewWalletProvider.error instanceof BrowserWalletNotFoundException\n                ? <span>\n                  Browser wallet could not be found, try {' '}\n                  <A target=\"_blank\" href=\"https://metamask.io/\">installing metamask</A> \n                  {' '} and reloading the page.\n                </span>\n                : String(qNewWalletProvider.error)\n              }\n            </ErrorP>\n            : qAccounts.isLoading\n              ? <Loading><P>\n                Loading accounts for {newWalletProviderType}…\n              </P></Loading>\n              : qAccounts.isError\n                ? <ErrorP>\n                  Error loading accounts: {String(qNewWalletProvider.error)}\n                </ErrorP>\n                : <SelectNewWalletAddressForm \n                  addresses={qAccounts.data!!}\n                  onAddressSelected={address => {\n                    setNewWalletProviderType(null)\n                    const wallet: Wallet = {\n                      providerType: newWalletProviderType,\n                      provider: qNewWalletProvider.data!!,\n                      address\n                    }\n                    setWallets((currentWallets: Set<Wallet>) => new Set([...currentWallets, wallet]))\n                    onWalletSelected(wallet)\n                  }} />\n        }\n        <Button onClick={handleSelectDifferent}>\n          Use a different provider\n        </Button>\n      </>\n    }\n  </>)\n}\n\nexport default SelectWallet\n","import { FunctionComponent, useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport Web3 from \"web3\";\nimport Wallet from \"../../../service/eth/Wallet\";\nimport Deposit from \"../../../service/model/Deposit\";\nimport { errorToString } from \"../../../util\";\nimport { Button } from \"../../style/button\";\nimport { ErrorP } from \"../../style/error\";\nimport { H2, P } from \"../../style/text\";\nimport Loading from \"../Loading\";\nimport { TransactionReceipt } from \"web3-core\";\nimport GenericError from \"../GenericError\";\n\nconst GetEthTxReceipt: FunctionComponent<{\n  wallet: Wallet,\n  deposit: Deposit,\n  onGotEthTxReceipt: (receipt: TransactionReceipt) => void\n}> = ({ wallet, deposit, onGotEthTxReceipt }) => {\n  const ethTxHash = deposit.ethTxHash\n  if (ethTxHash == null) {\n    throw new Error('GetTransactionReceipt requires a paid deposit')\n  }\n  const web3 = new Web3(wallet.provider)\n  const qEthTx = useQuery(\n    ['web3', web3.eth.getTransactionReceipt.name, ethTxHash],\n    () => web3.eth.getTransactionReceipt(ethTxHash)\n  )\n  const [callbackCalled, setCallbackCalled] = useState(false)\n\n  useEffect(() => {\n    if (!callbackCalled && qEthTx.isSuccess) {\n      setCallbackCalled(true)\n      onGotEthTxReceipt(qEthTx.data!!)\n    }\n  }, [qEthTx.isSuccess])\n\n  return <>\n    <H2>Retrieve transaction info</H2>\n    {(() => {\n      if (qEthTx.isLoading) {\n        return <Loading><P>Retrieving transaction info...</P></Loading>\n      }\n\n      if (qEthTx.isError) {\n        return <>\n          <GenericError error={qEthTx.error}>\n            An error occured while retrieving the transaction info\n          </GenericError>\n          <Button onClick={() => qEthTx.refetch()}>Try again</Button>\n        </>\n      }\n\n      return (<>\n        <P>Got transaction info!</P>\n        <Button\n          onClick={() => onGotEthTxReceipt(qEthTx.data!!)}>\n          Continue\n        </Button>\n      </>)\n\n    })()}\n  </>\n}\n\nexport default GetEthTxReceipt\n","import React, { FunctionComponent, useState } from \"react\";\nimport Web3 from \"web3\";\nimport { ChainId } from \"../../../service/eth/networks\";\nimport Deposit from \"../../../service/model/Deposit\";\nimport Carousel from \"../Carousel\";\nimport SuccessSlide from \"./SuccessSlide\";\nimport VerifyDepositSlide from \"./VerifyDepositSlide\";\nimport ConfirmEthTxSlide from \"./ConfirmEthTxSlide\";\nimport { TransactionReceipt } from \"web3-core\";\nimport SelectWallet from \"../wallet/SelectWalletSlide\";\nimport Wallet from \"../../../service/eth/Wallet\";\nimport GetEthTxReceipt from \"./GetEthTxReceipt\";\nimport { H2, P } from \"../../style/text\";\n\nconst ConfirmAndVerifyDepositSlides: FunctionComponent<{\n  chainId: ChainId,\n  deposit: Deposit,\n  onVerified: (deposite: Deposit) => void\n}> = ({ deposit, onVerified, chainId }) => {\n  const [selectedWallet, setSelectedWallet] = useState<Wallet | null>(null)\n  const [ethTxReceipt, setEthTxReceipt] = useState<TransactionReceipt | null>(null)\n  const [carouselIndex, setCarouselIndex] = useState(0)\n  const [hasConfirmedEthTx, setHasConfirmedEthTx] = useState(false)\n  const [verifiedDeposit, setVerifiedDeposit] = useState<Deposit | null>(null)\n\n  return <Carousel currentIndex={carouselIndex}>{[\n    <div key=\"select-wallet\">\n      <H2>Select wallet to confirm transaction</H2>\n      <P>\n        It doesn't matter which wallet you choose, \n        you can use the same one you used to log in.\n      </P>\n      <SelectWallet\n        key={SelectWallet.name}\n        onWalletSelected={wallet => {\n          setSelectedWallet(wallet)\n          setCarouselIndex(old => Math.max(old, 1))\n        }} />\n    </div>,\n    ...(selectedWallet != null\n      ? [\n        <GetEthTxReceipt\n          key={GetEthTxReceipt.name}\n          deposit={deposit}\n          wallet={selectedWallet}\n          onGotEthTxReceipt={receipt => {\n            setEthTxReceipt(receipt)\n            setCarouselIndex(old => Math.max(old, 2))\n          }} />,\n        ...(ethTxReceipt != null\n          ? [\n            <ConfirmEthTxSlide\n              key={ConfirmEthTxSlide.name}\n              web3={new Web3(selectedWallet.provider)}\n              chainId={chainId}\n              txReceipt={ethTxReceipt}\n              onTransactionConfirmed={() => {\n                setHasConfirmedEthTx(true)\n                setCarouselIndex(old => Math.max(old, 3))\n              }} />,\n            ...(hasConfirmedEthTx\n              ? [\n                <VerifyDepositSlide\n                  key={VerifyDepositSlide.name}\n                  deposit={deposit}\n                  onVerified={verifiedDeposit => {\n                    setVerifiedDeposit(verifiedDeposit)\n                    setCarouselIndex(old => Math.max(old, 4))\n                  }} />,\n                ...(verifiedDeposit != null\n                  ? [\n                    <SuccessSlide\n                      key={SuccessSlide.name}\n                      deposit={deposit}\n                      onClose={() => onVerified(verifiedDeposit)} />\n                  ]\n                  : []\n                )\n              ]\n              : []\n            )\n          ]\n          : []\n        )\n      ]\n      : []\n    )\n  ]}</Carousel>\n}\n\nexport default ConfirmAndVerifyDepositSlides\n","import ReactModal from \"react-modal\";\nimport styled, { DefaultTheme } from \"styled-components\";\n\nexport const modalStyle = (theme: DefaultTheme) => ({\n  content: {\n    position: 'relative',\n    inset: 'unset',\n    maxWidth: '40rem',\n    maxHeight: '100%',\n    background: 'none',\n    padding: '0',\n    border: 'none',\n    overflowY: 'auto',\n    borderRadius: '0'\n  },\n  overlay: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 100,\n    width: '100vw',\n    height: '100vh',\n    padding: '1rem'\n  }\n} as ReactModal.Styles)\n\nexport const ModalContainer = styled.div`\n  background-color: ${p => p.theme.color.background};\n  padding: 1.5rem;\n  max-height: 100%;\n  overflow-y: auto;\n  position: relative;\n`\n\nexport const ModalCloseButton = styled.button`\n  position: absolute;\n  right: 0;\n  top: 0;\n  background: none;\n  border: none;\n  padding: 1rem 1rem;\n  color: #fff;\n  cursor: pointer;\n`\n","import { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { FunctionComponent, useRef } from \"react\";\nimport Modal from \"react-modal\";\nimport { useTheme } from \"styled-components\";\nimport { modalStyle, ModalContainer, ModalCloseButton } from \"../style/modal\";\nimport { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\nimport ReactModal from \"react-modal\";\n\nconst AvModal: FunctionComponent<{\n  isOpen: boolean,\n  onClose: () => void,\n  contentLabel: string\n}> = ({ isOpen, onClose, contentLabel, children }) => {\n  const theme = useTheme()\n  const modalRef = useRef<ReactModal>(null)\n\n  const refAsElement = modalRef.current == null ? null : modalRef.current as unknown as HTMLElement\n\n  return <Modal\n    style={modalStyle(theme)}\n    isOpen={isOpen}\n    contentLabel={contentLabel}\n    onRequestClose={onClose}\n    ref={modalRef}\n    onAfterOpen={() => {\n      if (refAsElement != null) disableBodyScroll(refAsElement)\n    }}\n    onAfterClose={() => {\n      if (refAsElement != null) enableBodyScroll(refAsElement)\n    }}>\n    <ModalContainer>\n      <ModalCloseButton onClick={onClose}>\n        <FontAwesomeIcon icon={faTimes} size=\"2x\" />\n      </ModalCloseButton>\n      {children}\n    </ModalContainer>\n  </Modal>\n}\n\nexport default AvModal\n","import React, { FunctionComponent } from \"react\";\nimport { FallbackProps } from \"react-error-boundary\";\nimport { Button } from \"../../style/button\";\nimport { P, Pre } from \"../../style/text\";\n\nconst ErrorFallback: FunctionComponent<FallbackProps> = (\n  { error, resetErrorBoundary }\n) => {\n  return (<>\n    <P>Something went wrong during your purchase:</P>\n    <Pre>{error.message}</Pre>\n    <Button onClick={resetErrorBoundary}>Try again</Button>\n  </>)\n}\n\nexport default ErrorFallback\n","import { faCheck, faInfoCircle, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { FunctionComponent, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport styled, { useTheme } from \"styled-components\";\nimport { useCurrentUserDetails, useIos } from \"../../contexts\";\nimport { getMyDeposits, getMyPaidDeposits } from \"../../service/api/deposit\";\nimport { weiToEtherStr, weiToGweiStr } from \"../../service/eth/util\";\nimport Deposit from \"../../service/model/Deposit\";\nimport LoadingRing from \"./LoadingRing\";\nimport Modal from 'react-modal';\nimport DepositDetails from \"./DepositDetails\";\nimport { Button } from \"../style/button\";\nimport { ErrorP } from \"../style/error\";\nimport { Table, Th, TdAlignRight, Td, TdItalic, TdIconContainer, Tr, TrHead } from \"../style/table\";\nimport { A, P } from \"../style/text\";\nimport { txHashToExplorerUrl } from \"../../service/eth/networks\";\nimport { modalStyle } from \"../style/modal\";\nimport VerifyDepositSlide from \"./purchase/VerifyDepositSlide\";\nimport Carousel from \"./Carousel\";\nimport ConfirmAndVerifyDepositSlides from \"./purchase/ConfirmAndVerifyDepositSlides\";\nimport ErrorContactInfo from \"./ErrorContactInfo\";\nimport GenericError from \"./GenericError\";\nimport { fractionlessToString } from \"../../service/number\";\nimport config from \"../../config\";\nimport AvModal from \"./AvModal\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport ErrorFallback from \"./purchase/ErrorFallback\";\n\nconst DepositDetailsButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n  padding: 0.4rem 0;\n  margin: 0;\n`\n\nconst DepositsTable: FunctionComponent<{}> = () => {\n  const { deposit: depositIo } = useIos()\n  const [currentDepositDetails, setCurrentDepositDetails] = useState<Deposit | null>(null)\n  const [showVerifyDepositModal, setShowVerifyDepositModal] = useState(false)\n  const qDeposits = useQuery(\n    ['deposits', getMyPaidDeposits.name],\n    () => getMyPaidDeposits(depositIo)\n  )\n  const theme = useTheme()\n\n  if (qDeposits.isLoading) {\n    return <>\n      <P>Loading deposits...</P>\n      <LoadingRing />\n    </>\n  }\n\n  if (qDeposits.isError) {\n    return <>\n      <GenericError error={qDeposits.error}>\n        An error occured while trying to fetch your deposits\n      </GenericError>\n      <Button onClick={() => qDeposits.refetch()}>Try again</Button>\n    </>\n  }\n\n  const handleLaunchVerification = () => {\n    setShowVerifyDepositModal(true)\n  }\n\n  const closeDepositDetailsModal = () => {\n    setCurrentDepositDetails(null)\n  }\n\n  return <>\n    {qDeposits.data!!.length > 0\n      ? <>\n        <P>\n          To verify an unverified transaction (<FontAwesomeIcon icon={faTimes} color={theme.color.error} />),\n          click on the <FontAwesomeIcon icon={faInfoCircle} color=\"#fff\" /> icon.\n        </P>\n        <Table>\n          <thead>\n            <TrHead>\n              <Th>Amount</Th>\n              <Th>Creation time</Th>\n              <Th>Deposit price Ether</Th>\n              <Th>Gas price Gwei</Th>\n              <Th>Transaction hash</Th>\n              <Th>Verified</Th>\n              <Th>Details</Th>\n            </TrHead>\n          </thead>\n          <tbody>\n            {qDeposits.data!!.map(deposit => (<Tr key={deposit.uuid}>\n              <TdAlignRight>{fractionlessToString(deposit.amount)}</TdAlignRight>\n              <Td>{(new Date(deposit.timeCreated*1000)).toLocaleString()}</Td>\n              <TdAlignRight>{weiToEtherStr(deposit.priceEther)}</TdAlignRight>\n              <TdAlignRight>{weiToGweiStr(deposit.gasPrice)}</TdAlignRight>\n              {deposit.ethTxHash == null\n                ? <TdItalic>Not yet created</TdItalic>\n                : <Td><A\n                    href={txHashToExplorerUrl(config.frontend.chainId, deposit.ethTxHash)}\n                    target=\"_blank\" rel=\"noreferrer\">\n                      {deposit.ethTxHash.slice(0, 15)}...\n                  </A></Td>\n              }\n              <Td>{deposit.isVerified\n                ? <FontAwesomeIcon icon={faCheck} color={theme.color.success} />\n                : <FontAwesomeIcon icon={faTimes} color={theme.color.error} />\n              }</Td>\n              <Td>\n                <DepositDetailsButton\n                  onClick={() => setCurrentDepositDetails(deposit)}>\n                  <FontAwesomeIcon icon={faInfoCircle} color=\"#fff\" />\n                </DepositDetailsButton>\n              </Td>\n            </Tr>))}\n          </tbody>\n        </Table>\n      </>\n      : <P>You haven't made any presale deposits yet</P>\n    }\n\n    <AvModal\n      isOpen={(currentDepositDetails != null && !showVerifyDepositModal)}\n      contentLabel=\"Deposit Details Dialog\"\n      onClose={closeDepositDetailsModal}>\n        <ErrorBoundary FallbackComponent={ErrorFallback}>\n          {currentDepositDetails != null\n            ? <DepositDetails\n                deposit={currentDepositDetails}\n                onLaunchVerification={() => handleLaunchVerification()} />\n            : <ErrorP>No deposit selected</ErrorP>\n          }\n        </ErrorBoundary>\n    </AvModal>\n    <AvModal\n      isOpen={currentDepositDetails != null && showVerifyDepositModal}\n      contentLabel=\"Deposit Details Dialog\"\n      onClose={closeDepositDetailsModal}>\n        <ErrorBoundary FallbackComponent={ErrorFallback}>\n          {currentDepositDetails != null\n            ? <ConfirmAndVerifyDepositSlides\n              chainId={config.frontend.chainId}\n              deposit={currentDepositDetails}\n              onVerified={verifiedDeposit => {\n                qDeposits.refetch()\n                setCurrentDepositDetails(verifiedDeposit)\n                setShowVerifyDepositModal(false)\n              }} />\n            : <ErrorP>No deposit selected</ErrorP>\n          }\n        </ErrorBoundary>\n    </AvModal>\n  </>\n}\n\nexport default DepositsTable\n","import React from \"react\"\nimport { FunctionComponent } from \"react\"\nimport styled from \"styled-components\"\nimport { useCurrentUserDetails } from \"../../contexts\"\nimport { Button } from \"../style/button\"\nimport { MainWrapper, Main, Section } from \"../style/grouping\"\nimport { H1, H2, P } from \"../style/text\"\nimport CurrentUserInfo from \"./auth/CurrentUserInfo\"\nimport LogOut from \"./auth/LogOut\"\nimport DepositsTable from \"./DepositsTable\"\n\nconst LogoutSection = styled(Section)`\n  margin-top: 5rem;\n`\n\nconst Profile: FunctionComponent<{}> = () => {\n  const { currentUser, loginByModal } = useCurrentUserDetails()\n\n  return <MainWrapper>\n    <Main>\n      <H1>My profile</H1>\n      {currentUser != null\n        ? <>\n          <Section>\n            <H2>Details</H2>\n            <CurrentUserInfo />\n          </Section>\n          <Section>\n            <H2>Deposits</H2>\n            <DepositsTable />\n          </Section>\n          <LogoutSection>\n            <LogOut />\n          </LogoutSection>\n        </>\n        : <>\n          <P>You need to be logged in to view your profile.</P>\n          <Button onClick={() => loginByModal()}>Log in</Button>\n        </>\n      }\n    </Main>\n  </MainWrapper>\n}\n\nexport default Profile\n","import React, { FunctionComponent, useRef, useState } from \"react\"\nimport BN from \"bn.js\"\nimport { Input, Label } from \"../../style/form\"\nimport { H2, Pre, P, MonoData, SpanItalic } from \"../../style/text\"\nimport styled from \"styled-components\"\nimport { browserDecimalSeparator, fractionlessToString, fractionlessNumberFromString } from \"../../../service/number\"\nimport { ErrorP } from \"../../style/error\"\nimport { NumberFormatException } from \"../../../service/number/exceptions\"\nimport { ImageButton } from \"../../style/button\"\nimport config from \"../../../config\"\n\nconst CENT = new BN('100')\n\nconst ParamsSlide: FunctionComponent<{\n  onEtherCheckout: (amount: BN) => void\n}> = ({ onEtherCheckout }) => {\n  const form = useRef<HTMLFormElement>(null)\n  const [amountError, setAmountError] = useState<string | null>(null)\n  const [amount, setAmount] = useState<null | BN>(null)\n  const [amountText, setAmountText] = useState('')\n\n  const handleAmountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newAmountString = e.target.value\n    let parseResult\n    try {\n      parseResult = fractionlessNumberFromString(newAmountString)\n    } catch (error) {\n      if (error instanceof NumberFormatException) {\n        setAmountError(error.message)\n        setAmountText(newAmountString)\n        return\n      } else throw error\n    }\n    if (parseResult === null) {\n      setAmountError(null)\n      setAmountText('')\n      setAmount(null)\n      return\n    }\n    const { number: newAmount, withDecimalSeparator } = parseResult\n    if (newAmount == null) return\n    if (newAmount.lt(config.stages.presale.minAmount)) {\n      setAmountError('Amount is too small')\n      setAmountText(withDecimalSeparator)\n      return\n    }\n    setAmountError(null)\n    setAmount(newAmount)\n    setAmountText(withDecimalSeparator)\n  }\n\n  const handleEthereumCheckout = (e: React.MouseEvent<HTMLButtonElement>) => {\n    if (form.current?.checkValidity() !== true) return\n    if (amount == null) {\n      setAmountError('Please specify an amount')\n      return\n    }\n    onEtherCheckout(amount)\n  }\n\n  const minimumAmountStr = fractionlessToString(config.stages.presale.minAmount)\n  const amountChargedNow = amount == null ? null : amount.mul(config.stages.presale.depositPercentage).div(CENT)\n  const amountChargedDuringPrivate = amountChargedNow == null || amount == null ? null : amount.sub(amountChargedNow)\n\n  return (<>\n    <H2>Select investment amount</H2>\n    <P>\n      Please enter the exact whole number or two-decimal digit \n      fractional number (482, 787.00, 300.25, 222.44, 420.5 ...)\n      you want to receive during the private ICO as a unique\n      Art Value NFT Number (along with 2X this amount in ARTS).\n      You will be charged {config.stages.presale.depositPercentage.toString(10)}% \n      of this amount now as the presale deposit.\n      It is possible the number you enter is already reserved\n      by someone else. If so, you'll be given the option to choose\n      an alternative.\n    </P>\n    <form onSubmit={e => e.preventDefault()} ref={form}>\n      <Label>\n        Private ICO investment (EUR, {minimumAmountStr} minimum)\n        <Input\n          type=\"text\" placeholder={minimumAmountStr}\n          onChange={handleAmountChange}\n          value={amountText} />\n      </Label>\n      {amountError != null ? <ErrorP>{amountError}</ErrorP> : <></>}\n      <P>\n        Amount charged now:{' '}\n        <MonoData>{amountChargedNow == null ? '?' : fractionlessToString(amountChargedNow)}</MonoData><br/>\n        Amount charged during private ICO:{' '}\n        <MonoData>{amountChargedDuringPrivate == null ? '?' : fractionlessToString(amountChargedDuringPrivate)}</MonoData><br />\n      </P>\n      <P>Checkout with:</P>\n      {/* <button className=\"payment-btn\" type=\"submit\" value=\"creditcard\" onClick={onStipeBtnClick}>\n        <img src={process.env.PUBLIC_URL + '/icon/mastercard.svg'} alt=\"mastercard\"/>\n        <img src={process.env.PUBLIC_URL + '/icon/visa.svg'} alt=\"visa\"/>\n        <img src={process.env.PUBLIC_URL + '/icon/americanexpress.svg'} alt=\"americanexpress\"/>\n      </button> */}\n      <ImageButton\n        type=\"submit\"\n        onClick={handleEthereumCheckout}\n        style={{backgroundColor: '#D3DAF9'}}>\n        <img src={process.env.PUBLIC_URL + '/icon/ethereum.svg'} alt=\"etherum\"/>\n        {/* <img src={process.env.PUBLIC_URL + '/icon/bitcoin.svg'} alt=\"bitcoin\"/> */}\n      </ImageButton>\n      <P><SpanItalic>During this stage of the ICO only payment via Ethereum is available.</SpanItalic></P>\n      <P><SpanItalic>Your browser uses '{browserDecimalSeparator}' as a decimal separator. We therefore use it in the input field above and to display numbers.</SpanItalic></P>\n      <P><SpanItalic>All values above are given in Euro and exclude gas fees.</SpanItalic></P>\n    </form>\n  </>)\n}\n\nexport default ParamsSlide\n","import React, { FunctionComponent, useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useCurrentUserDetails, useIos } from \"../../../contexts\";\nimport { UserDto } from \"../../../service/model/User\";\nimport * as authApi from \"../../../service/api/auth\";\nimport LoadingRing from \"../LoadingRing\";\nimport { isNamedApiException, NamedApiException } from \"../../../service/api\";\nimport { errorToString, markErrorProcessed } from \"../../../util\";\nimport { ErrorP } from \"../../style/error\";\nimport { H2, P } from \"../../style/text\";\nimport GenericError from \"../GenericError\";\n\nconst LogInUsingSessionSlide: FunctionComponent<{\n  onLoggedIn: (user: UserDto) => void,\n  onNotLoggedIn: () => void\n}> = ({ onLoggedIn, onNotLoggedIn }) => {\n  const [callbackCalled, setCallbackCalled] = useState(false)\n  const { setCurrentUser } = useCurrentUserDetails()\n  const { auth: authIo } = useIos()\n  const qMe = useQuery(\n    ['auth', 'me'],\n    () => authApi.getMe(authIo),\n    {\n      retry: (count, error) => {\n        markErrorProcessed(error)\n        if (isNamedApiException(error, 'NotLoggedInException')) return false\n        return count < 3\n      },\n      enabled: !callbackCalled\n    }\n  )\n  \n  useEffect(() => {\n    if (!callbackCalled) {      \n      if (qMe.isSuccess) {\n        const userFromApi = qMe.data!!\n        setCallbackCalled(true)\n        setCurrentUser(userFromApi)\n        onLoggedIn(userFromApi)\n      } else if (isNamedApiException(qMe.error, 'NotLoggedInException')) {\n        setCallbackCalled(true)\n        onNotLoggedIn()\n      }\n    }\n  }, [qMe.isSuccess, qMe.error])\n\n  if (qMe.isLoading) {\n    return <>\n      <H2>Logging you in...</H2>\n      <LoadingRing />\n    </>\n  } else if (qMe.isError) {\n    return <>\n      <GenericError error={qMe.error}>\n        An error occured while logging you in\n      </GenericError>\n      <button onClick={() => qMe.refetch()}>Try again</button>\n    </>\n  } else if (qMe.data == null) {\n    return <P>Not logged in</P>\n  }\n\n  return <P>Logged in as {qMe.data!!.uuid}</P>\n}\n\nexport default LogInUsingSessionSlide\n","import React, { FunctionComponent, useEffect, useState } from \"react\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { useCurrentUserDetails, useIos } from \"../../../contexts\";\nimport { UserDto } from \"../../../service/model/User\";\nimport * as authApi from \"../../../service/api/auth\";\nimport LoadingRing from \"../LoadingRing\";\nimport Wallet from \"../../../service/eth/Wallet\";\nimport Web3 from \"web3\";\nimport { isNamedApiException } from \"../../../service/api\";\nimport { markErrorProcessed } from \"../../../util\";\nimport { ErrorP } from \"../../style/error\";\nimport { H2, P } from \"../../style/text\";\nimport { Button } from \"../../style/button\";\nimport GenericError from \"../GenericError\";\n\nconst LogInUsingWalletSlide: FunctionComponent<{\n  wallet: Wallet,\n  onLoggedIn: (user: UserDto) => void,\n  onNoSuchUser: () => void\n}> = ({ wallet, onLoggedIn, onNoSuchUser }) => {\n  const { setCurrentUser } = useCurrentUserDetails()\n  const { auth: authIo } = useIos()\n  const web3 = new Web3(wallet.provider)\n  const qAuthenticateMutation = useMutation(\n    ['auth', authApi.authenticateThroughWeb3.name, wallet.providerType, wallet.address],\n    () => authApi.authenticateThroughWeb3(authIo, web3, wallet.address),\n    {\n      retry: (count, error) => {\n        markErrorProcessed(error)\n        if (error instanceof authApi.SigningDeniedException) return false\n        if (isNamedApiException(error, 'NotFoundException')) return false\n        return count < 3\n      },\n    }\n  )\n  \n  useEffect(() => {\n    if (qAuthenticateMutation.isSuccess) {\n      const userFromApi = qAuthenticateMutation.data!!\n      setCurrentUser(userFromApi)\n      onLoggedIn(userFromApi)\n    } else if (isNamedApiException(qAuthenticateMutation.error, 'NotFoundException')) {\n      onNoSuchUser()\n    }\n  }, [qAuthenticateMutation.isSuccess, qAuthenticateMutation.error])\n\n  return <>\n    <H2>Sign the authentication code to log in</H2>\n    <P>\n      By signing the authentication code make sure you control \n      this crypto wallet. This way we know any tokens you purchase will \n      be sent to the right wallet.\n    </P>\n    {(() => {\n      if (qAuthenticateMutation.isLoading) {\n        return <>\n          <P>Signing authentication code...</P>\n          <P>\n            Your crypto wallet may ask for you permission.<br/>\n            If so, accept the prompt to continue.\n          </P>\n          <LoadingRing />\n        </>\n      } else if (qAuthenticateMutation.isError) {\n        return <>\n          <GenericError error={qAuthenticateMutation.error}>\n            An error occured while trying to log in using your wallet\n          </GenericError>\n          <button onClick={() => qAuthenticateMutation.mutate()}>Try again</button>\n        </>\n      } else if (qAuthenticateMutation.isSuccess) {\n        return <P>\n          Logged in as {qAuthenticateMutation.data!!.uuid}\n        </P>\n      }\n    \n      return <>\n        <P>\n          Sign the Art Value authentication code to log in using your \n          Ethereum wallet.\n        </P>\n        <Button onClick={() => qAuthenticateMutation.mutate()}>Sign</Button>\n      </>\n    })()}\n  </>\n}\n\nexport default LogInUsingWalletSlide\n","import React, { FunctionComponent, useState } from \"react\";\nimport { Button } from \"../../style/button\";\nimport { Input, Label } from \"../../style/form\";\n\nconst SignupForm: FunctionComponent<{\n  onFormComplete: (email: string) => void\n}> = ({ onFormComplete }) => {\n  const [email, setEmail] = useState<string>('')\n\n  return (<form onSubmit={e => {\n    e.preventDefault()\n    onFormComplete(email)\n  }}>\n    <Label>\n      Email\n      <Input\n        type=\"text\"\n        placeholder=\"john.doe@example.com\"\n        onChange={e => setEmail(e.target.value)} />\n    </Label>\n    <Button type=\"submit\" value=\"portis\">\n      Sign up\n    </Button>\n  </form>)\n}\n\nexport default SignupForm\n","import React, { FunctionComponent, useEffect, useState } from \"react\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { useCurrentUserDetails, useIos } from \"../../../contexts\";\nimport { UserDto } from \"../../../service/model/User\";\nimport * as authApi from \"../../../service/api/auth\";\nimport LoadingRing from \"../LoadingRing\";\nimport Wallet from \"../../../service/eth/Wallet\";\nimport Web3 from \"web3\";\nimport SignupForm from \"./SignupForm\";\nimport { ErrorP } from \"../../style/error\";\nimport { H2, P, SpanItalic } from \"../../style/text\";\nimport GenericError from \"../GenericError\";\nimport { Button } from \"../../style/button\";\n\nconst SignUpSlide: FunctionComponent<{\n  wallet: Wallet,\n  onSignedUp: (user: UserDto) => void\n}> = ({ wallet, onSignedUp }) => {\n  const { setCurrentUser } = useCurrentUserDetails()\n  const { auth: authIo } = useIos()\n  const web3 = new Web3(wallet.provider)\n  const [email, setEmail] = useState<string | null>(null)\n  const signUpMutation = useMutation(\n    (email: string) => authApi.signUp(authIo, web3, wallet, email)\n  )\n  \n  useEffect(() => {\n    if (signUpMutation.isSuccess) {\n      const userFromApi = signUpMutation.data!!\n      setCurrentUser(userFromApi)\n      onSignedUp(userFromApi)\n    }\n  }, [signUpMutation])\n\n  return <>\n    <H2>Sign up</H2>\n    <P>\n      Your Ethereum wallet isn't connected to an Art Value account yet.\n      Enter your email address to create an account.\n    </P>\n    <P>\n      All future assets (like ARTS or Number NFT's) will\n      be send to this wallet's address ({wallet.address}).\n    </P>\n    {(() => {\n      if (signUpMutation.isLoading) {\n        return <>\n          <P>Signing you up...</P>\n          <P><SpanItalic>\n            Your crypto wallet may ask for your permission. If so, accept the prompt.\n          </SpanItalic></P>\n          <LoadingRing />\n        </>\n      } else if (signUpMutation.isError) {\n        return <>\n          <GenericError error={signUpMutation.error}>\n            An error occured while signing you up\n          </GenericError>\n          {email != null\n            ? <Button onClick={() => signUpMutation.mutateAsync(email)}>Try again</Button>\n            : <></>\n          }\n        </>\n      } else if (signUpMutation.isSuccess) {\n        return <P>Logged in as {signUpMutation.data!!.uuid}</P>\n      }\n      \n      return <SignupForm onFormComplete={email => {\n        setEmail(email)\n        signUpMutation.mutateAsync(email)\n      }} />\n    })()}\n  </>\n}\n\nexport default SignUpSlide\n","import React, { FunctionComponent, useEffect, useState } from \"react\";\nimport { useCurrentUserDetails } from \"../../../contexts\";\nimport Wallet from \"../../../service/eth/Wallet\";\nimport { UserDto } from \"../../../service/model/User\";\nimport Carousel from \"../Carousel\";\nimport LogInUsingSessionSlide from \"./LogInUsingSessionSlide\";\nimport SelectWallet from \"../wallet/SelectWalletSlide\";\nimport LogInUsingWalletSlide from \"./LogInUsingWalletSlide\";\nimport SignUpSlide from \"./SignUpSlide\";\nimport { ErrorP } from \"../../style/error\";\nimport { H2, P } from \"../../style/text\";\n\nconst LoginSlides: FunctionComponent<{\n  onLoggedIn: (user: UserDto) => void\n}> = ({ onLoggedIn }) => {\n  const { currentUser } = useCurrentUserDetails()\n  const [carouselIndex, setCarouselIndex] = useState(0)\n  const [chosenWallet, setChosenWallet] = useState<Wallet | null>(null)\n  const [callbackCalled, setCallbackCalled] = useState(false)\n\n  useEffect(() => {\n    if (!callbackCalled && currentUser != null) {\n      setCallbackCalled(true)\n      onLoggedIn(currentUser)\n    }\n  }, [currentUser])\n\n  if (currentUser != null) {\n    return <P>Logged in as {currentUser.uuid}</P>\n  }\n\n  return (<Carousel currentIndex={carouselIndex}>{[\n    <LogInUsingSessionSlide\n      key={LogInUsingSessionSlide.name}\n      onLoggedIn={() => {}}\n      onNotLoggedIn={() => setCarouselIndex(old => Math.max(old, 1)) } />,\n    <div key=\"select-wallet\">\n      <H2>Select an Ethereum wallet to log in</H2>\n      <P>All tokens will be sent to this wallet.</P>\n      <SelectWallet\n        onWalletSelected={wallet => {\n          setChosenWallet(wallet)\n          setCarouselIndex(old => Math.max(old, 2))\n        }} />\n    </div>,\n    ...(chosenWallet != null\n      ? [\n        <LogInUsingWalletSlide\n          key={LogInUsingWalletSlide.name}\n          wallet={chosenWallet}\n          onLoggedIn={onLoggedIn}\n          onNoSuchUser={() => setCarouselIndex(old => Math.max(old, 3))} />,\n        <SignUpSlide\n          key={SignUpSlide.name}\n          wallet={chosenWallet}\n          onSignedUp={user => onLoggedIn(user)} />\n      ]\n      : [<ErrorP key={\"no-wallet-chosen\"}>No wallet chosen</ErrorP>]\n    )\n  ]}</Carousel>)\n}\n\nexport default LoginSlides\n","import BN from \"bn.js\";\nimport Web3 from \"web3\";\nimport { TransactionReceipt, PromiEvent } from \"web3-core\";\nimport { ChainId } from \"./networks\";\n\nexport interface EthPaymentTxResult {\n  receipt: TransactionReceipt,\n  promiEvent: PromiEvent<TransactionReceipt>\n}\n\nexport default async function payUsingWeb3(\n  web3: Web3,\n  from: string,\n  to: string,\n  amount: BN,\n  gasPrice: BN,\n  chainId: ChainId\n) {\n  return await web3.eth.sendTransaction({\n    from,\n    to,\n    gasPrice,\n    chainId,\n    value: amount\n  })\n}\n","import BN from \"bn.js\";\nimport { FunctionComponent, useEffect, useState } from \"react\";\nimport { useMutation } from \"react-query\";\nimport Web3 from \"web3\";\nimport { ChainId, txHashToExplorerUrl } from \"../../../service/eth/networks\";\nimport payUsingWeb3 from \"../../../service/eth/pay\";\nimport Wallet from \"../../../service/eth/Wallet\";\nimport { TransactionReceipt } from \"web3-core\";\nimport { A, H2, MonoData, P, SpanItalic } from \"../../style/text\";\nimport { weiToEtherStr } from \"../../../service/eth/util\";\nimport Loading from \"../Loading\";\nimport { Button } from \"../../style/button\";\nimport GenericError from \"../GenericError\";\n\nconst PayUsingWalletSlide: FunctionComponent<{\n  wallet: Wallet,\n  chainId: ChainId,\n  toAddress: string,\n  amount: BN,\n  gasPrice: BN,\n  onPaymentComplete: (receipt: TransactionReceipt) => void\n}> = ({ wallet, amount, gasPrice, chainId, toAddress, onPaymentComplete }) => {\n  const web3 = new Web3(wallet.provider)\n  const [callbackCalled, setCallbackCalled] = useState(false)\n  const qPaymentMutation = useMutation(\n    () => payUsingWeb3(\n      web3, wallet.address, toAddress, amount, gasPrice, chainId\n    )\n  )\n\n  useEffect(() => {\n    if (!callbackCalled && qPaymentMutation.isSuccess) {\n      setCallbackCalled(true)\n      onPaymentComplete(qPaymentMutation.data!!)\n    }\n  }, [qPaymentMutation.isSuccess])\n\n  return <>\n    <H2>Pay using your Ethereum wallet</H2>\n    {(() => {\n      if (qPaymentMutation.isLoading) {\n        return <>\n          <P>\n            Your crypto wallet may ask for you permission.<br/>\n            If so, accept the prompt to continue.\n          </P>\n          <Loading><P>Paying...</P></Loading>\n          <P><SpanItalic>This may take a while, your wallet needs to submit the transaction to the network.</SpanItalic></P>\n        </>\n      } else if (qPaymentMutation.isError) {\n        return <>\n          <GenericError error={qPaymentMutation.error}>\n            An error occured while paying using your crypto wallet\n          </GenericError>\n          <P>\n            Only try again if you know the transaction failed!\n            To get refunded if the transaction did go through, please contact us.\n          </P>\n          <Button onClick={() => qPaymentMutation.mutate()}>Try again</Button>\n        </>\n      } else if (qPaymentMutation.isSuccess) {\n        const txHash = qPaymentMutation.data!!.transactionHash\n        return <>\n          <P>\n            Payment successful!<br />\n            <A href={txHashToExplorerUrl(chainId, txHash)} target=\"_blank\">\n              View on etherscan\n            </A>\n          </P>\n          <Button onClick={() => onPaymentComplete(qPaymentMutation.data!!)}>\n            Continue\n          </Button>\n        </>\n      }\n    \n      return <>\n        <P>To pay, you need to approve the following transaction:</P>\n        <P>\n          From: <MonoData>{wallet.address} (your selected address)</MonoData><br/>\n          To: <MonoData>{toAddress} (Art Value's address)</MonoData><br/>\n          Amount: <MonoData>{weiToEtherStr(amount)}</MonoData> Ether\n        </P>\n        <Button onClick={() => qPaymentMutation.mutate()}>Pay</Button>\n      </>\n    })()}\n  </>\n}\n\nexport default PayUsingWalletSlide\n","import BN from \"bn.js\";\nimport React, { FunctionComponent, useState } from \"react\";\nimport { ChainId } from \"../../../service/eth/networks\";\nimport Wallet from \"../../../service/eth/Wallet\";\nimport Carousel from \"../Carousel\";\nimport SelectWallet from \"../wallet/SelectWalletSlide\";\nimport PayUsingWalletSlide from \"./PayUsingWalletSlide\";\nimport { TransactionReceipt, PromiEvent } from \"web3-core\";\nimport { H2, P, SpanItalic } from \"../../style/text\";\n\nconst EtherSlides: FunctionComponent<{\n  chainId: ChainId,\n  toAddress: string,\n  amount: BN,\n  gasPrice: BN,\n  onPaymentComplete: (receipt: TransactionReceipt, wallet: Wallet) => void\n}> = ({ chainId, amount, toAddress, gasPrice, onPaymentComplete }) => {\n  const [carouselIndex, setCarouselIndex] = useState(0)\n  const [chosenWallet, setChosenWallet] = useState<Wallet | null>(null)\n  \n  return <Carousel currentIndex={carouselIndex}>{[\n    <div key=\"select-wallet\">\n      <H2>Select an Ethereum wallet to pay</H2>\n      <P>This doesn't need to be the same wallet you used to log in.</P>\n      <SelectWallet\n        key={SelectWallet.name}\n        onWalletSelected={wallet => {\n          setChosenWallet(wallet)\n          setCarouselIndex(old => Math.max(old, 1))\n        }} />\n    </div>,\n    ...(chosenWallet !== null ? [\n      <PayUsingWalletSlide\n        key={PayUsingWalletSlide.name}\n        chainId={chainId}\n        toAddress={toAddress}\n        wallet={chosenWallet}\n        amount={amount}\n        gasPrice={gasPrice}\n        onPaymentComplete={receipt => onPaymentComplete(receipt, chosenWallet)} />\n    ] : [])\n  ]}</Carousel>\n}\n\nexport default EtherSlides\n","import BN from \"bn.js\";\nimport React, { FunctionComponent, useEffect } from \"react\";\nimport { useMutation } from \"react-query\";\nimport { useIos } from \"../../../contexts\";\nimport { isNamedApiException } from \"../../../service/api\";\nimport { createDeposit } from \"../../../service/api/deposit\";\nimport Deposit from \"../../../service/model/Deposit\";\nimport { fractionlessToString } from \"../../../service/number\";\nimport { Button } from \"../../style/button\";\nimport { ErrorP } from \"../../style/error\";\nimport { A, H2, P } from \"../../style/text\";\nimport GenericError from \"../GenericError\";\nimport LoadingRing from \"../LoadingRing\";\n\nconst CreateDepositSlide: FunctionComponent<{\n  amount: BN,\n  onDepositCreated: (deposit: Deposit) => void\n}> = ({ amount, onDepositCreated }) => {\n  const { deposit: depositIo } = useIos()\n  const qDepositMutation = useMutation(\n    () => createDeposit(depositIo, amount)\n  )\n\n  useEffect(() => qDepositMutation.mutate(), [amount])\n\n  useEffect(() => {\n    if (qDepositMutation.isSuccess) {\n      onDepositCreated(qDepositMutation.data!!)\n    }\n  }, [qDepositMutation.data])\n\n  return <>\n    <H2>Deposit request</H2>\n    {(() => {\n      if (qDepositMutation.isLoading) {\n        return <>\n          <P>Creating deposit request...</P>\n          <LoadingRing />\n        </>\n      } else if (qDepositMutation.isError) {\n        if (isNamedApiException(qDepositMutation.error, 'IsReservedNumberException')) {\n          return <>\n            <P>Sorry, but {fractionlessToString(amount)} is a reserved number.</P>\n            <P>\n              Please contact us at{' '}\n              <A href={`mailto:info@artvalue.org?subject=Purchase%20of%20${fractionlessToString(amount)}`}>info@artvalue.org</A>{' '}\n              if you are interested in buying this exact number.\n            </P>\n            <P>\n              You can go back and select another number. For example {fractionlessToString(amount.add(new BN(10)))} or {fractionlessToString(amount.add(new BN(200)))}.\n            </P>\n          </>\n        } else if (isNamedApiException(qDepositMutation.error, 'AlreadyReservedException')) {\n          return <>\n            <P>Sorry, but the number {fractionlessToString(amount)} has already been selected by another investor.</P>\n            <P>\n              Please contact us at{' '}\n              <A href={`mailto:info@artvalue.org`}>info@artvalue.org</A>{' '}\n              if you have any questions.\n            </P>\n            <P>\n              You can go back and select another number. For example {fractionlessToString(amount.add(new BN(10)))} or {fractionlessToString(amount.add(new BN(200)))}.\n            </P>\n          </>\n        }\n        return <>\n          <GenericError error={qDepositMutation.error}>\n            An error occured trying to create the deposit\n          </GenericError>\n          <Button onClick={() => qDepositMutation.mutate()}>Try again</Button>\n        </>\n      } else if (qDepositMutation.isSuccess) {\n        return <>\n          <P>\n            Deposit request created successfully!\n          </P>\n          <Button\n            onClick={() => onDepositCreated(qDepositMutation.data!!)}>\n            Continue\n          </Button>\n        </>\n      }\n    \n      return <ErrorP>\n        Could not create the deposit request\n      </ErrorP>\n    })()}\n  </>\n}\n\nexport default CreateDepositSlide\n","import React, { FunctionComponent } from \"react\";\nimport { Button } from \"../../style/button\";\nimport { Section } from \"../../style/grouping\";\nimport { H2, P, StrongNumber } from \"../../style/text\";\n\nconst InfoSlide: FunctionComponent<{\n  onContinue: () => void\n}> = ({ onContinue }) => {\n  return <>\n    <Section>\n      <H2>Invest in the Art Value ICO presale</H2>\n      <P>\n        During the Art Value ICO presale you can make a deposit to secure \n        the <StrongNumber>0.5</StrongNumber> Euro per ARTS private ICO price \n        (1 Euro per ARTS during the public ICO) and the unique <StrongNumber>Art \n        Value Number NFT</StrongNumber> equal to your invested amount.\n      </P>\n      <P>\n        The deposit is <StrongNumber>20%</StrongNumber> of your total private ICO investment.\n      </P>\n      <P>\n        For example, by investing €200 in the private ICO, you will be charged \n        €40 now and you will need to pay the remaining €160 during the private \n        ICO (in a week or so). After paying this remaining amount you will \n        receive 400 ARTS and the unique '200' Art Value \n        Number NFT.\n      </P>\n    </Section>\n    <Button onClick={() => onContinue()}>Continue</Button>\n  </>\n}\n\nexport default InfoSlide\n","import { FunctionComponent, useEffect } from \"react\";\nimport { useMutation } from \"react-query\";\nimport { useIos } from \"../../../contexts\";\nimport { setDepositEthTxHash } from \"../../../service/api/deposit\";\nimport Deposit from \"../../../service/model/Deposit\";\nimport { Button } from \"../../style/button\";\nimport { ErrorP } from \"../../style/error\";\nimport { H2, P } from \"../../style/text\";\nimport GenericError from \"../GenericError\";\nimport LoadingRing from \"../LoadingRing\";\n\nconst SetDepositEthTxHashSlide: FunctionComponent<{\n  deposit: Deposit,\n  ethTxHash: string,\n  onDepositEthTxHashSet: (deposit: Deposit) => void\n}> = ({ deposit, ethTxHash, onDepositEthTxHashSet }) => {\n  const { deposit: depositIo } = useIos()\n  const qDepositMutation = useMutation(\n    () => setDepositEthTxHash(depositIo, deposit, ethTxHash)\n  )\n\n  useEffect(() => qDepositMutation.mutate(), [])\n\n  useEffect(() => {\n    if (qDepositMutation.isSuccess) {\n      onDepositEthTxHashSet(qDepositMutation.data!!)\n    }\n  }, [qDepositMutation.data])\n\n  return <>\n    <H2>Update deposit status</H2>\n    {(() => {\n      if (qDepositMutation.isLoading) {\n        return <>\n          <P>Updating deposit status with your transaction's data...</P>\n          <LoadingRing />\n        </>\n      } else if (qDepositMutation.isError) {\n        return <>\n          <GenericError error={qDepositMutation.error}>\n            An error occured while updating the deposit\n          </GenericError>\n          <Button onClick={() => qDepositMutation.mutate()}>Try again</Button>\n        </>\n      } else if (qDepositMutation.isSuccess) {\n        return <>\n          <P>\n            Deposit request updated successfully!\n          </P>\n          <Button\n            onClick={() => onDepositEthTxHashSet(qDepositMutation.data!!)}>\n            Continue\n          </Button>\n        </>\n      }\n    \n      return <ErrorP>\n        Could not update the deposit\n      </ErrorP>\n    })()}\n  </>\n}\n\nexport default SetDepositEthTxHashSlide\n","import React, { FunctionComponent, useEffect, useState } from \"react\"\nimport ParamsSlide from \"./ParamsSlide\"\nimport Carousel from \"../Carousel\"\nimport BN from \"bn.js\"\nimport StripeSlide from \"./StripeSlide\"\nimport { Stripe } from \"@stripe/stripe-js\"\nimport { Elements } from \"@stripe/react-stripe-js\"\nimport { useCurrentUserDetails, useWallets } from \"../../../contexts\"\nimport LoginSlides from \"../auth/LoginSlides\"\nimport EtherSlides from \"./EtherSlides\"\nimport CreateDepositSlide from \"./CreateDepositSlide\"\nimport Deposit, { DepositDto } from \"../../../service/model/Deposit\"\nimport VerifyDepositSlide from \"./VerifyDepositSlide\"\nimport InfoSlide from \"./InfoSlide\"\nimport { TransactionReceipt } from \"web3-core\";\nimport SetDepositEthTxHashSlide from \"./UpdateDepositSlide\"\nimport { Button } from \"../../style/button\"\nimport { EthPaymentTxResult } from \"../../../service/eth/pay\"\nimport ConfirmEthTxSlide from \"./ConfirmEthTxSlide\"\nimport SuccessSlide from \"./SuccessSlide\"\nimport Wallet from \"../../../service/eth/Wallet\"\nimport Web3 from \"web3\"\nimport config from \"../../../config\";\n\nconst PurchaseSlides: FunctionComponent<{\n  stripePromise: Promise<Stripe | null>,\n  onClose: (success: boolean) => void\n}> = ({ stripePromise, onClose }) => {\n  const { currentUser } = useCurrentUserDetails()\n  const [amount, setAmount] = useState<BN | null>(null)\n  const [deposit, setDeposit] = useState<Deposit | null>(null)\n  const [depositEthTxHashIsSet, setDepositEthTxHashIsSet] = useState(false)\n  const [ethTxReceiptAndWallet, setEthTxReceiptAndWallet] = useState<{\n    receipt: TransactionReceipt, wallet: Wallet\n  } | null>(null)\n  const [ethTxConfirmations, setEthTxConfirmations] = useState(0)\n  const [ethTxConfirmed, setEthTxConfirmed] = useState(false)\n  const [ethTxVerified, setEthTxVerified] = useState(false)\n  const [carouselIndex, setCarouselIndex] = useState<number>(0)\n  const [checkoutId, setCheckoutId] = useState<number>() // Used to track this checkout client side (different from AvTxId)\n\n  useEffect(() => setCheckoutId(Math.random()), [])\n\n\n  // const handleStripeCheckout = (_amount: BN) => {\n  //   console.log(`Amount specified, stripe chosen: ${_amount}`)\n  //   setAmount(_amount)\n  //   setCarouselIndex(2)\n  // }\n\n  const handleEtherCheckout = (_amount: BN) => {\n    console.log(`Amount specified: ${_amount}, Ether chosen`)\n    setAmount(_amount)\n    setCarouselIndex(old => Math.max(old, 2))\n  }\n\n  // const onStripeCheckoutDone = (_avTransactionId: string) => {\n  //   console.log(`Stripe checkout done, avTransactionId: ${_avTransactionId}`)\n  //   setAvTransactionId(_avTransactionId)\n  //   setCarouselIndex(3)\n  // }\n\n  return (<>\n  <Carousel currentIndex={carouselIndex}>{[\n    ...(currentUser == null\n      ? [<LoginSlides\n          key={LoginSlides.name}\n          onLoggedIn={() => {}} />]\n      : []\n    ),\n    <InfoSlide\n      key=\"Info slide\"\n      onContinue={() => setCarouselIndex(old => Math.max(old, 1))} />,\n    <ParamsSlide\n      key={ParamsSlide.name}\n      onEtherCheckout={handleEtherCheckout} />,\n    ...(amount != null\n      ? [\n        <CreateDepositSlide\n          key={CreateDepositSlide.name}\n          amount={amount}\n          onDepositCreated={deposit => {\n            setDeposit(deposit)\n            setCarouselIndex(old => Math.max(old, 3))\n          }} />,\n        ...(deposit != null\n          ? [\n            <EtherSlides\n              key={EtherSlides.name}\n              chainId={config.frontend.chainId}\n              toAddress={config.etherToAddress}\n              amount={deposit.priceEther}\n              gasPrice={deposit.gasPrice}\n              onPaymentComplete={(receipt, wallet) => {\n                setEthTxReceiptAndWallet({receipt, wallet})\n                setCarouselIndex(old => Math.max(old, 4))\n              }} />,\n            ...(ethTxReceiptAndWallet != null\n              ? [\n                <SetDepositEthTxHashSlide\n                  key={SetDepositEthTxHashSlide.name}\n                  deposit={deposit}\n                  ethTxHash={ethTxReceiptAndWallet.receipt.transactionHash}\n                  onDepositEthTxHashSet={(deposit) => {\n                    setDeposit(deposit)\n                    setDepositEthTxHashIsSet(true)\n                    setCarouselIndex(old => Math.max(old, 5))\n                  }} />,\n                  ...(depositEthTxHashIsSet\n                    ? [\n                      <ConfirmEthTxSlide\n                        key={ConfirmEthTxSlide.name}\n                        web3={new Web3(ethTxReceiptAndWallet.wallet.provider)}\n                        chainId={config.frontend.chainId}\n                        txReceipt={ethTxReceiptAndWallet.receipt}\n                        onTransactionConfirmed={() => {\n                          setEthTxConfirmed(true)\n                          setCarouselIndex(old => Math.max(old, 6))\n                        }} />,\n                      ...(ethTxConfirmed\n                        ? [\n                          <VerifyDepositSlide\n                            key={VerifyDepositSlide.name}\n                            deposit={deposit}\n                            onVerified={() => {\n                              setEthTxVerified(true)\n                              setCarouselIndex(old => Math.max(old, 7))\n                            }} />,\n                          ...(ethTxVerified\n                            ? [\n                              <SuccessSlide\n                                key={SuccessSlide.name}\n                                deposit={deposit}\n                                onClose={() => onClose(true)} />\n                            ]\n                            : []\n                          )\n                        ]\n                        : []\n                      )\n                    ]\n                    : []\n                  )\n              ]\n              : []\n            )\n          ]\n          : []\n        )\n\n      ]\n      : []\n    )\n  ]}</Carousel>\n  {carouselIndex > 0\n    ? <Button onClick={() => setCarouselIndex(old => Math.max(0, old - 1))}>Back</Button>\n    : <></>\n  }\n  </>)\n}\n\nexport default PurchaseSlides\n","import { FunctionComponent, useEffect, useState } from \"react\"\nimport styled, { css } from \"styled-components\"\n\n\ntype FlipClockProps = {\n  date: number\n}\n\nconst toDeltaFromNow = (date: number) => Date.now() - date\n\nconst deltaToSeconds = (t: number) => t / 1000\nconst deltaToMinutes = (t: number) => deltaToSeconds(t) / 60\nconst deltaToHours = (t: number) => deltaToMinutes(t) / 60\n\nconst deltaToDays = (t: number) => Math.floor(deltaToHours(t) / 24)\nconst deltaToHoursOfDay = (t: number) => Math.floor(deltaToHours(t) % 24)\nconst deltaToMinutesOfHour = (t: number) => Math.floor(deltaToMinutes(t) % 60)\nconst deltaToSecondsOfMinute = (t: number) => Math.floor(deltaToSeconds(t) % 60)\n\ninterface DeltaParts {\n  isNegative: boolean,\n  days: number,\n  hoursOfDay: number,\n  minutesOfHour: number,\n  secondsOfMinute: number\n}\n\nconst deltaToParts = (t: number): DeltaParts => {\n  const tAbs = Math.abs(t);\n  return {\n    isNegative: t < 0,\n    days: deltaToDays(tAbs),\n    hoursOfDay: deltaToHoursOfDay(tAbs),\n    minutesOfHour: deltaToMinutesOfHour(tAbs),\n    secondsOfMinute: deltaToSecondsOfMinute(tAbs)\n  }\n}\n\nconst deltaPartsWithChange = (deltaPartsOld: DeltaParts, deltaPartsNew: DeltaParts) => ({\n  old: deltaPartsOld,\n  new: deltaPartsNew\n})\n\nconst BigNumber = styled.div`\n  font-family: \"Avenir95Black\";\n  color: white;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n`\n\nconst NumberPartContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n`\n\nconst NumberPartLabel = styled.span`\n  display: inline-block;\n  text-align: left;\n`\n\nconst NumberPartSeparator = styled.span`\n  font-size: 80pt;\n`\n\nconst NumberPart = styled.span`\n  font-size: 80pt;\n  display: inline-block;\n  margin-bottom: -0.2em;\n`\n\nexport const TextClock: FunctionComponent<FlipClockProps> = ({date}) => {\n  const [tMinusParts, setTMinusParts] = useState(deltaPartsWithChange(\n    deltaToParts(Infinity),\n    deltaToParts(-toDeltaFromNow(date))\n  ))\n\n  useEffect(() => {\n    const interval = window.setInterval(() => {\n      const newState = deltaPartsWithChange(\n        tMinusParts.new,\n        deltaToParts(-toDeltaFromNow(date))\n      )\n      setTMinusParts(newState)\n    }, 70)\n\n    return () => {\n      window.clearInterval(interval)\n    }\n  })\n\n  return <BigNumber>\n    <NumberPartContainer>\n      <NumberPart>\n        {tMinusParts.new.isNegative ? '-' : ''}\n        {tMinusParts.new.days.toString().padStart(3, '0')}\n      </NumberPart>\n      <NumberPartLabel>days</NumberPartLabel>\n    </NumberPartContainer>\n    <NumberPartSeparator>:</NumberPartSeparator>\n    <NumberPartContainer>\n      <NumberPart>\n        {tMinusParts.new.hoursOfDay.toString().padStart(2, '0')}\n      </NumberPart>\n      <NumberPartLabel>hours</NumberPartLabel>\n    </NumberPartContainer>\n    <NumberPartSeparator>:</NumberPartSeparator>\n    <NumberPartContainer>\n      <NumberPart>\n        {tMinusParts.new.minutesOfHour.toString().padStart(2, '0')}\n      </NumberPart>\n      <NumberPartLabel>minutes</NumberPartLabel>\n    </NumberPartContainer>\n    <NumberPartSeparator>:</NumberPartSeparator>\n    <NumberPartContainer>\n      <NumberPart>\n        {tMinusParts.new.secondsOfMinute.toString().padStart(2, '0')}\n      </NumberPart>\n      <NumberPartLabel>seconds</NumberPartLabel>\n    </NumberPartContainer>\n  </BigNumber>\n}\n","import { FunctionComponent, useState } from 'react';\nimport { Stripe } from '@stripe/stripe-js';\nimport PurchaseSlides from './purchase/PurchaseSlides';\nimport styled from 'styled-components';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport ErrorFallback from './purchase/ErrorFallback';\nimport { ButtonBig } from '../style/button';\nimport { TextClock } from './TextCountdown';\nimport { A, H1, P, StrongNumber } from '../style/text';\nimport { Main, MainWrapper } from '../style/grouping';\nimport AvModal from './AvModal';\n\nconst HomeH1 = styled(H1)`\n  margin-top: 5rem;\n  font-size: 30pt;\n  > strong {\n    display: block;\n    font-size: 60pt;\n  }\n`\n\nconst TextClockContainer = styled.div`\n  margin-bottom: 5rem;\n`\n\nconst Home: FunctionComponent<{\n  stripePromise: Promise<Stripe>\n}> = ({ stripePromise }) => {\n  const [purchaseDialogOpen, setPurchaseDialogOpen] = useState(false)\n  const endDate = 1623275999000 // 9/6/21 23:59:59 CEST https://www.epochconverter.com/\n\n  const handlePurchaseTokenClick = () => {\n    setPurchaseDialogOpen(true)\n  }\n\n  const closeModal = (success: boolean) => {\n    if (!success) {\n      const confirmation = window.confirm(\n        'Are you sure you want to cancel your deposit?'\n        + ' If your payment is currently being submitted to the network you might'\n        + ' lose your deposit. Please contact us at info@artvalue.org if you'\n        + ' experienced any problems or have any questions. \\n'\n        + 'Click OK if you\\'re sure you want to cancel your deposit.'\n      )\n      if (!confirmation) return\n    }\n    setPurchaseDialogOpen(false)\n  }\n\n  return (<MainWrapper>\n    <Main>\n      <HomeH1>\n        <strong>Art Value ICO</strong>\n        The Art Value ICO presale is now open!\n      </HomeH1>\n      <P>\n        Invest now to secure the <StrongNumber>2X</StrongNumber> ARTS per Euro price during the private ICO. \n      </P>\n      <P>\n        By investing now you will also receive a unique <StrongNumber>Art Value Number NFT</StrongNumber> \n        equal to your invested amount. You could be the proud owner of the number\n        460! <A href=\"https://artvalue.org/ico/\">Learn more</A>\n      </P>\n      <TextClockContainer>\n        <TextClock date={endDate} />\n        <P>...until the presale ends.</P>\n      </TextClockContainer>\n      <ButtonBig onClick={handlePurchaseTokenClick}>Invest now</ButtonBig>\n      <AvModal\n        isOpen={purchaseDialogOpen}\n        onClose={() => closeModal(false)}\n        contentLabel=\"Coin Purchase Dialog\">\n        <ErrorBoundary FallbackComponent={ErrorFallback}>\n          <PurchaseSlides stripePromise={stripePromise} onClose={success => closeModal(success)} />\n        </ErrorBoundary>\n      </AvModal>\n    </Main>\n  </MainWrapper>)\n}\n\nexport default Home\n","import React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport RoutingPaths from './RoutingPaths';\nimport Profile from '../ui/components/Profile';\nimport HomeView from '../ui/components/Home';\n\nexport const Routes = (props: { children?: React.ReactChild }) => {\n\treturn (\n\t\t<BrowserRouter>\n\t\t\t{props.children}\n\t\t\t<Switch>\n\t\t\t\t<Route exact path={RoutingPaths.homeView} component={HomeView} />\n\t\t\t\t<Route exact path={RoutingPaths.myProfile} component={Profile} />\n\t\t\t\t<Route component={HomeView} />\n\t\t\t</Switch>\n\t\t</BrowserRouter>\n\t);\n};\n","import styled from 'styled-components';\nimport { BaseTitle } from '../../style/base';\n\ntype StyledNavigationProps = {\n\tviewportWidth: number;\n};\n\nexport const StyledNavigation = styled.div<StyledNavigationProps>`\n\t${BaseTitle}\n\theight: ${({ viewportWidth }) => (viewportWidth < 700 ? '85px' : '56px')};\n`;\n","import styled from 'styled-components';\nimport { BaseText } from '../../../style/base';\n\ntype DesktopLinkPropsProps = {\n\tactiveLink: string;\n};\n\nexport const DesktopWrapper = styled.div`\n\tdisplay: grid;\n\tgrid-gap: 1rem;\n\tjustify-items: center;\n\tpadding: 1em;\n\tgrid-template-columns: min-content\n\t\tmin-content\n\t\tauto;\n\tgrid-template-areas: 'logo nav user';\n\talign-items: center;\n\tpadding: 0;\n\tborder-bottom: 2px solid ${(props) => props.theme.color.border};\n\tmax-width:1124px;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\tpadding-top: 1rem;\n`\n\nexport const DesktopLink = styled.span<DesktopLinkPropsProps>`\n\t${BaseText}\n\tfont-weight: ${({ activeLink }) => (activeLink === 'active' ? 'bold' : 'normal')};\n\ttext-decoration: none;\n\t&:hover {\n\t\topacity: 0.6;\n\t}\n`\n\nexport const DesktopLogo = styled.img`\n\twidth: 120px;\n\theight: auto;\n\tgrid-area: logo;\n\tjustify-self: start;\n\tmargin: 0;\n\tpadding: 0;\n\tcursor: pointer;\n`\n\nexport const NavList = styled.ul`\n\tgrid-area: nav;\n\tjustify-self: center;\n\tdisplay: grid;\n\tgrid-auto-flow: column;\n\tgrid-auto-columns: max-content;\n\tgap: 0.5rem;\n\tlist-style: none;\n\tcursor: pointer;\n`\n\nexport const NavListItem = styled.li`\n\tmargin-right: 5em;\n`\n\nexport const User = styled.div`\n\tgrid-area: user;\n\tjustify-self: end;\n\tmargin-right: 2em;\n\tcursor: pointer;\n`\n","import { FunctionComponent } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { DesktopWrapper, DesktopLink, DesktopLogo, NavList, NavListItem, User } from './StyledDesktop.styles';\n\ntype DesktopProps = {\n\tlogo: string;\n\ttabs: ReadonlyArray<string>;\n\tpaths: ReadonlyArray<string>;\n};\n\nexport const NavigationDesktop: FunctionComponent<DesktopProps> = ({ logo, tabs, paths }) => {\n\tconst history = useHistory();\n\tconst currentRoute = useLocation();\n\n\treturn (\n\t\t<DesktopWrapper>\n\t\t\t<DesktopLogo alt=\"art value logo\" src={logo} onClick={() => history.push(paths[0])}></DesktopLogo>\n\t\t\t<NavList>\n\t\t\t\t<NavListItem>\n\t\t\t\t\t<DesktopLink\n\t\t\t\t\t\tactiveLink={currentRoute.pathname.includes(paths[1]) ? 'active' : 'notActive'}\n\t\t\t\t\t\tonClick={() => history.push(paths[1])}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tabs[1]}\n\t\t\t\t\t</DesktopLink>\n\t\t\t\t</NavListItem>\n\t\t\t\t<NavListItem>\n\t\t\t\t\t<DesktopLink\n\t\t\t\t\t\tactiveLink={currentRoute.pathname.includes(paths[2]) ? 'active' : 'notActive'}\n\t\t\t\t\t\tonClick={() => history.push(paths[2])}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tabs[2]}\n\t\t\t\t\t</DesktopLink>\n\t\t\t\t</NavListItem>\n\t\t\t\t<NavListItem>\n\t\t\t\t\t<DesktopLink activeLink={'notActive'} onClick={() => window.location.href = 'https://artvalue.org'}>\n\t\t\t\t\t\tArtValue.org\n\t\t\t\t\t</DesktopLink>\n\t\t\t\t</NavListItem>\n\t\t\t</NavList>\n\t\t</DesktopWrapper>\n\t);\n};\n","import styled from 'styled-components';\n\ntype StyledBurgerProps = {\n\topen: boolean;\n};\n\nexport const StyledBurger = styled.button<StyledBurgerProps>`\n\tposition: absolute;\n\ttop: 5%;\n\tleft: 2rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-around;\n\twidth: 2rem;\n\theight: 2rem;\n\tbackground: transparent;\n\tborder: none;\n\tcursor: pointer;\n\tpadding: 0;\n\tz-index: 10;\n\n\t&:focus {\n\t\toutline: none;\n\t}\n\n\tdiv {\n\t\twidth: 2rem;\n\t\theight: 0.25rem;\n\t\tbackground: white;\n\t\tborder-radius: 10px;\n\t\ttransition: all 0.3s linear;\n\t\tposition: relative;\n\t\ttransform-origin: 1px;\n\n\t\t:first-child {\n\t\t\ttransform: ${({ open }) => (open ? 'rotate(45deg)' : 'rotate(0)')};\n\t\t}\n\n\t\t:nth-child(2) {\n\t\t\topacity: ${({ open }) => (open ? '0' : '1')};\n\t\t\ttransform: ${({ open }) => (open ? 'translateX(20px)' : 'translateX(0)')};\n\t\t}\n\n\t\t:nth-child(3) {\n\t\t\ttransform: ${({ open }) => (open ? 'rotate(-45deg)' : 'rotate(0)')};\n\t\t}\n\t}\n`;\n","import { FunctionComponent } from 'react';\nimport { StyledBurger } from './StyledBurger.styles';\n\ninterface BurgerProps {\n\topen: boolean;\n\tsetOpen: (value: boolean) => void;\n}\n\nexport const Burger: FunctionComponent<BurgerProps> = ({ open, setOpen }) => {\n\treturn (\n\t\t<StyledBurger open={open} onClick={() => setOpen(!open)}>\n\t\t\t<div />\n\t\t\t<div />\n\t\t\t<div />\n\t\t</StyledBurger>\n\t);\n};\n","import styled from 'styled-components';\n\ntype StyledMenuProps = {\n\topen: boolean;\n};\n\nexport const StyledMenu = styled.nav<StyledMenuProps>`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tbackground-color: ${(props) => props.theme.color.surface};\n\theight: 100vh;\n\ttext-align: left;\n\tpadding: 2rem;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\ttransition: transform 0.3s ease-in-out;\n\ttransform: ${({ open }) => (open ? 'translateX(0)' : 'translateX(-100%)')};\n\tdiv {\n\t\tfont-size: 1rem;\n\t\ttext-transform: uppercase;\n\t\tpadding: 1rem 0;\n\t\tfont-weight: bold;\n\t\tletter-spacing: 0.5rem;\n\t\tcolor: white;\n\t\ttext-decoration: none;\n\t\ttransition: color 0.3s linear;\n\t\tcursor: pointer;\n\t}\n`;\n","import { FunctionComponent } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { StyledMenu } from './StyledMenu.styles';\n\ninterface MenuProps {\n\topen: boolean;\n\tsetOpen: (value: boolean) => void;\n\ttabs: ReadonlyArray<string>;\n\tpaths: ReadonlyArray<string>;\n}\n\nexport const Menu: FunctionComponent<MenuProps> = ({ open, tabs, paths }) => {\n\tconst history = useHistory();\n\treturn (\n\t\t<StyledMenu open={open}>\n\t\t\t<div className=\"menu-item\" onClick={() => history.push(paths[1])}>\n\t\t\t\t{tabs[1]}\n\t\t\t</div>\n\t\t\t<div className=\"menu-item\" onClick={() => history.push(paths[2])}>\n\t\t\t\t{tabs[2]}\n\t\t\t</div>\n\t\t\t<div className=\"menu-item\" onClick={() => window.location.href = 'https://artvalue.org'}>\n\t\t\t\tArtValue.org\n\t\t\t</div>\n\t\t</StyledMenu>\n\t);\n};\n","import { useState, FunctionComponent, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useOnClickOutside } from '../../hooks/hooks';\nimport styled from 'styled-components';\nimport { Burger } from './Burger/Burger';\nimport { Menu } from './Menu/Menu';\n\nconst Wrapper = styled.div`\n\tpadding: 0;\n\theight: 85px;\n`;\n\nconst Logo = styled.img`\n\tmax-width: 160px;\n\theight: auto;\n\tposition: absolute;\n\ttop: 2%;\n\tright: 1rem;\n\tcursor: pointer;\n`;\n\ntype MobileProps = {\n\tlogo: string;\n\ttabs: ReadonlyArray<string>;\n\tpaths: ReadonlyArray<string>;\n};\n\ninterface MobileState {\n\topen: boolean;\n}\n\n/* TODO: add click on side of menu to close it */\n/*  Add styling to div*/\n\nexport const NavigationMobile: FunctionComponent<MobileProps> = ({ logo, tabs, paths }) => {\n\tconst [open, setOpen] = useState<MobileState['open']>(false);\n\tconst node = useRef<HTMLDivElement>(null);\n\tuseOnClickOutside(node, () => setOpen(false));\n\tconst history = useHistory();\n\treturn (\n\t\t<Wrapper ref={node}>\n\t\t\t<Logo className=\"menu-item\" alt=\"art value logo\" src={logo} onClick={() => {}} />\n\t\t\t<Burger open={open} setOpen={setOpen} />\n\t\t\t<Menu open={open} setOpen={setOpen} tabs={tabs} paths={paths} />\n\t\t</Wrapper>\n\t);\n};\n","import { useEffect } from 'react';\n/* TODO: type ref prop */\nexport const useOnClickOutside = (ref:any, handler:Function) => {\n\tuseEffect(() => {\n\t\tconst listener = (event: MouseEvent): void => {\n\t\t\tif (!ref.current || ref.current.contains(event.target)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thandler(event);\n\t\t};\n\t\tdocument.addEventListener('mousedown', listener);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('mousedown', listener);\n\t\t};\n\t}, [ref, handler]);\n};\n","export default __webpack_public_path__ + \"static/media/logo-transparent.8fe41ee7.png\";","import { useEffect, useState } from 'react';\nimport { StyledNavigation } from './StyledNavigation.styles';\nimport { NavigationDesktop } from './desktop/NavigationDesktop';\nimport { NavigationMobile } from './mobile/NavigationMobile';\nimport NavigationLogo from '../../../assets/images/logo-transparent.png';\nimport RoutingPaths from '../../../routes/RoutingPaths';\n\nconst TabNames: string[] = ['Presale', 'Presale', 'My Profile'];\nconst NavigationTabs: ReadonlyArray<string> = TabNames;\n\nconst RoutePaths: string[] = [\n\tRoutingPaths.homeView,\n\tRoutingPaths.homeView,\n\tRoutingPaths.myProfile,\n];\nconst NavigationPaths: ReadonlyArray<string> = RoutePaths;\n\nexport const Navigation = () => {\n\tconst [dimensions, setDimensions] = useState({\n\t\theight: window.innerHeight,\n\t\twidth: window.innerWidth,\n\t});\n\n\tuseEffect(() => {\n\t\tconst handleResize = () => {\n\t\t\tsetDimensions({\n\t\t\t\theight: window.innerHeight,\n\t\t\t\twidth: window.innerWidth,\n\t\t\t});\n\t\t};\n\n\t\twindow.addEventListener('resize', handleResize);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', handleResize);\n\t\t};\n\t});\n\n\tconst handleViewportSizeChange = () => {\n\t\tif (dimensions.width < 700) {\n\t\t\treturn <NavigationMobile logo={NavigationLogo} tabs={NavigationTabs} paths={NavigationPaths} />;\n\t\t} else {\n\t\t\treturn <NavigationDesktop logo={NavigationLogo} tabs={NavigationTabs} paths={NavigationPaths} />;\n\t\t}\n\t};\n\n\treturn <StyledNavigation viewportWidth={dimensions.width}>{handleViewportSizeChange()}</StyledNavigation>;\n};\n","import { io, Socket } from \"socket.io-client\";\n\nexport interface Ios {\n  auth: Socket,\n  transaction: Socket,\n  deposit: Socket\n}\n\nexport function createIo(base: string, ns: string) {\n  return io(`${base}/${ns}`, {\n    withCredentials: true\n  });\n}\n\nexport function createIos(base: string): Ios {\n  return {\n    auth: createIo(base, 'auth'),\n    transaction: createIo(base, 'transaction'),\n    deposit: createIo(base, 'deposit')\n  }\n}\n","import { ApiResult, parseApiResult } from \".\"\n\nexport async function sessionHeartbeat(base: string) {\n  const res = await fetch(`${base}/session-heartbeat`, {\n    credentials: 'include'\n  })\n  const apiResult = await res.json() as ApiResult<boolean>\n  return parseApiResult(apiResult)\n}\n","import { Routes } from '../../routes/Routes';\nimport { Navigation } from './navigation/Navigation';\nimport React, { FunctionComponent, useEffect, useState } from 'react';\nimport { IosContext, CurrentUserContextData, CurrentUserContext, WalletsContext, WalletsProviderData, RestContext, RestData } from '../../contexts';\nimport { createIos } from '../../service/api/io';\nimport { UserDto } from '../../service/model/User';\nimport { useAlert } from 'react-alert';\nimport * as authApi from \"../../service/api/auth\";\nimport { NamedApiException } from '../../service/api';\nimport Wallet from '../../service/eth/Wallet';\nimport styled, { useTheme } from 'styled-components';\nimport Modal from 'react-modal';\nimport LoginSlides from './auth/LoginSlides';\nimport { sessionHeartbeat } from '../../service/api/session';\nimport '../style/page.scss';\nimport { ModalCloseButton, ModalContainer, modalStyle } from '../style/modal';\nimport { isDev } from '../../env';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport AvModal from './AvModal';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport ErrorFallback from './purchase/ErrorFallback';\n\nconst apiBase = isDev ? 'http://localhost:3000' : 'https://art-value-ico-api.herokuapp.com'\nconsole.info(`Art Value ICO - ${isDev ? 'dev' : 'prod'} - API base: ${apiBase}`)\nconst restApiBase = `${apiBase}/api`\nconst ios = createIos(apiBase)\nconst rest: RestData = {\n  base: restApiBase\n}\nconst SESSION_HEARTBEAT_INTERVAL = 10000\n\nconst PageWrapperDiv = styled.div`\n  background-color: ${p => p.theme.color.background};\n  width: 100%;\n  min-height: 100%;\n`\n\nconst App: FunctionComponent<{}> = () => {\n  const [loginDialogOpen, setLoginDialogOpen] = useState(false)\n  const [currentUser, setCurrentUser] = useState<UserDto | null>(null)\n  const [wallets, setWallets] = useState<Set<Wallet>>(new Set())\n  const alert = useAlert()\n  const theme = useTheme()\n\n  useEffect(() => {\n    authApi.getMe(ios.auth).then(meFromApi => {\n      if (meFromApi != null) {\n        alert.success(`Logged in!`)\n        setCurrentUser(meFromApi)\n      }\n    }).catch(error => {\n      if (\n        error instanceof NamedApiException\n        && error.originalName === 'NotLoggedInException'\n      ) return\n      console.error(error)\n      alert.error(`Failed to login, try again later`)\n    })\n    setInterval(() => {\n      sessionHeartbeat(restApiBase)\n    }, SESSION_HEARTBEAT_INTERVAL)\n    sessionHeartbeat(restApiBase)\n  }, [alert])\n\n  const currentUserContextData: CurrentUserContextData = {\n    currentUser: currentUser,\n    setCurrentUser: currentUser => {\n      setCurrentUser(currentUser)\n    },\n    nullCurrentUser: () => setCurrentUser(null),\n    loginByModal: () => {\n      setLoginDialogOpen(true)\n    }\n  }\n\n  const web3WrapperContextData: WalletsProviderData = {\n    wallets,\n    setWallets\n  }\n\n  const closeLoginModal = () => {\n    setLoginDialogOpen(false)\n  }\n\n  return (\n    <RestContext.Provider value={rest}>\n      <IosContext.Provider value={ios}>\n        <WalletsContext.Provider value={web3WrapperContextData}>\n          <CurrentUserContext.Provider value={currentUserContextData}>\n            <PageWrapperDiv>\n              \n              <Routes>\n                <Navigation />\n              </Routes>\n\n              <AvModal\n                isOpen={loginDialogOpen}\n                onClose={closeLoginModal}\n                contentLabel=\"Login Dialog\">\n                <ErrorBoundary FallbackComponent={ErrorFallback}>\n                  <LoginSlides onLoggedIn={closeLoginModal} />\n                </ErrorBoundary>\n              </AvModal>\n\n            </PageWrapperDiv>\n          </CurrentUserContext.Provider>\n        </WalletsContext.Provider>\n      </IosContext.Provider>\n    </RestContext.Provider>\n  );\n}\n\nexport default App\n","import { faCheck, faExclamation, faInfo, faTimes } from \"@fortawesome/free-solid-svg-icons\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { FunctionComponent } from \"react\"\nimport { AlertComponentPropsWithStyle } from \"react-alert\"\nimport styled, { useTheme } from \"styled-components\"\n\nconst AlertContainerDiv = styled.div`\n  background-color: white;\n  border-radius: 4px;\n  padding: 0.7rem 0.9rem;\n`\n\nconst AlertCloseButton = styled.button`\n  padding: 0.3rem;\n  cursor: pointer;\n  margin-left: 0.5rem;\n  background: none;\n  border: none;\n`\n\nconst AlertIconSpan = styled.span`\n  margin-right: 0.5rem;\n`\n\nconst AlertTemplate: FunctionComponent<AlertComponentPropsWithStyle> = ({\n  style, options, message, close\n}) => {\n  const theme = useTheme()\n\n  return (<AlertContainerDiv style={style}>\n    <AlertIconSpan>{options.type == null ? '' : ({\n      info: <FontAwesomeIcon icon={faInfo} size=\"lg\" color={theme.color.info} />,\n      success: <FontAwesomeIcon icon={faCheck} size=\"lg\" color={theme.color.success} />,\n      error: <FontAwesomeIcon icon={faExclamation} size=\"lg\" color={theme.color.error} />\n    })[options.type]}</AlertIconSpan>\n    {message}\n    <AlertCloseButton onClick={close}><FontAwesomeIcon icon={faTimes} size=\"lg\" /></AlertCloseButton>\n  </AlertContainerDiv>)\n}\n\nexport default AlertTemplate\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './ui/components/App'\nimport { QueryClient, QueryClientProvider, setLogger as setQueryLogger } from 'react-query'\nimport { DefaultTheme, ThemeProvider } from 'styled-components'\nimport AlertTemplate from './ui/components/AlertTemplate'\nimport { AlertProviderProps, positions, transitions, Provider as AlertProvider } from 'react-alert'\nimport { darken, lighten } from 'polished'\nimport { isErrorProcessed } from './util'\nimport { loadStripe } from '@stripe/stripe-js'\nimport Modal from \"react-modal\";\n\nconst colorBackground = '#0a0a0a';\n\nconst theme: DefaultTheme = {\n\tcolor: {\n\t\tbackground: colorBackground,\n\t\tsurface: lighten(0.2, colorBackground),\n\t\tborder: lighten(0.4, colorBackground),\n\t\ttext: darken(0.1, '#fff'),\n    info: '#2c90be',\n    success: '#53b953',\n    error: '#a73e3e',\n    link: '#2c90be',\n    linkVisited: '#1d5975',\n    linkHover: '#5695b3',\n    linkActive: '#367ea0',\n\t},\n\tfont: {\n\t\ttext: 'Avenir95Light',\n\t\ttitle: 'Avenir95Black',\n\t},\n}\n\nconst stripePromise = loadStripe(\n  'pk_test_51ITna8JcDKL67QxNOgLJSMRVqFGagqi7pcHXCtewhqPyxqsWt5QrIWLeCoWXTZlZIi2gOhNSh3JE4M6Rr40VFhSJ00cmqxUD2d'\n)\n\nModal.setAppElement('#root')\n\nconst queryClient = new QueryClient()\nsetQueryLogger({\n  error: (...args) => {\n    if (!isErrorProcessed(args[0])) console.error.apply(console, args)\n  },\n  log: console.log,\n  warn: console.warn\n})\n\ninterface AlertProviderOptions extends Omit<AlertProviderProps, 'template'> { }\n\nconst alertOptions: AlertProviderOptions = {\n  position: positions.TOP_RIGHT,\n  timeout: 5000,\n  offset: '30px',\n  transition: transitions.SCALE\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <AlertProvider template={AlertTemplate} {...alertOptions}>\n        <QueryClientProvider client={queryClient}>\n          <App />\n        </QueryClientProvider>\n      </AlertProvider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n\n// async function portisTest() {\n//   const accounts = await getAccounts()\n//   const account = accounts[0]\n//   if (account == null) throw Error(\"No Etherium account found\")\n//   console.log(`Your account: ${account}`)\n\n//   const balanceStr = await web3.eth.getBalance(account)\n//   // let balanceWei = Number.parseInt(balanceStr)\n//   const myBalance = web3.utils.fromWei(balanceStr, 'ether')\n//   console.log(`Your wallet balance is currently ${myBalance} ETH`)\n\n//   const nonce = await web3.eth.getTransactionCount(account)\n//   console.log(`The outgoing transaction count for your wallet address is: ${nonce}`)\n\n//   const amountToSend = web3.utils.toBN(100000000)\n//   const ourAddress = \"0x87A4E8363AF65FC4a0FFf52D1d70918CC574492D\"\n\n//   const gasPrices = await getCurrentGasPrices()\n//   const txDetails: TransactionConfig = {\n//     \"from\": account,\n//     \"to\": ourAddress,\n//     \"value\": web3.utils.toHex(web3.utils.toWei(amountToSend, 'Gwei')),\n//     \"gas\": 21000,\n//     \"gasPrice\": gasPrices.low * 1000000000, // converts the gwei price to wei\n//     \"nonce\": nonce,\n//     \"chainId\": 4 // EIP 155 chainId - mainnet: 1, rinkeby: 4\n//   }\n \n//   const transaction = await web3.eth.signTransaction(txDetails)\n//   console.log(transaction)\n\n//   console.log(\"Sending transaction...\")\n//   const transactionEvent = web3.eth.sendSignedTransaction(transaction.raw)\n//   transactionEvent.on(\"transactionHash\", th => console.log(`Got a th: `, th))\n//   transactionEvent.on(\"receipt\", receipt => console.log(`Got a receipt: `, receipt))\n//   transactionEvent.on(\"confirmation\", conf => console.log(`Got confirmation!`))\n//   transactionEvent.then(receipt => console.log(`Transaction complete :) `, receipt))\n//   transactionEvent.catch(err => console.log(`Transaction error :( `, err))\n\n//   const nonceAfter = await web3.eth.getTransactionCount(account)\n//   console.log(`The outgoing transaction count for your wallet address is: ${nonceAfter}`)\n// }\n\n// portisTest()\n"],"sourceRoot":""}